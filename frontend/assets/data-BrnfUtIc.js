import{d as de,r as u,o as Ne,P as ze,a as Be,e as q,f as l,w as a,g as d,I as h,Q as v,j as ee,R as le,D as Q,F as te,l as ae,y as _,k as V,S as P,z as i,t as Pe,T as w,U as x,V as j,W as A,X as Oe,i as r}from"./index-_hVn5I9W.js";import{l as oe,a as Re,b as ne,u as Me,c as $e,d as Ee,e as Fe,f as qe,g as Qe}from"./index-pEi6Mg1z.js";const je={class:"koi-flex"},Ae=de({name:"dictDataPage"}),Ge=de({...Ae,setup(We){const O=u(!1),R=u(!0),I=u([{dictId:1,dictType:"YU-ADMIN🌻",dictLabel:"天才",dictStatus:"0",sorted:1,remark:"超级管理员",createTime:"2023-08-08 23:00:00"},{dictId:2,dictType:"张大仙",dictLabel:"小天才",dictStatus:"0",sorted:2,remark:"虎牙688，每晚七点半，不见不散！",createTime:"2023-08-08 23:00:00"},{dictId:3,dictType:"菜鸡",dictLabel:"干饭",dictStatus:"1",sorted:3,remark:"小小菜鸡，可笑可笑",createTime:"2023-08-08 23:00:00"}]),s=u({pageNo:1,pageSize:10,dictType:"",dictLabel:"",dictStatus:""}),U=u(0),ue=()=>{s.value={pageNo:1,pageSize:10,dictLabel:"",dictStatus:"",dictType:K.value}},se=()=>{console.log("搜索"),s.value.pageNo=1,c()},ie=()=>{console.log("重置搜索"),ue(),c()},c=async()=>{try{O.value=!0,I.value=[];const t=await ne(s.value);console.log("字典数据表格数据->",t.data),I.value=t.data.records,U.value=t.data.total,O.value=!1}catch(t){console.log(t),h("数据查询失败，请刷新重试🌻")}},T=async()=>{try{const t=await ne(s.value);console.log("字典数据表格数据->",t.data),I.value=t.data.records,U.value=t.data.total,console.log("字典数据表格数据")}catch(t){console.log(t),h("数据查询失败，请刷新重试🌻")}},re=ze();let K=u();Ne(()=>{K.value=re.params.dictType||"",s.value.dictType=K.value,c(),pe(),ce(),W()});const M=u(),ce=async()=>{try{M.value=[];const t=await oe("sys_tag_type");console.log("字典数据",t.data),M.value=t.data}catch(t){console.log(t)}},$=u(),W=async()=>{try{$.value=[];const t=await oe(s.value.dictType);console.log("字典数据",t.data),$.value=t.data}catch(t){console.log(t)}},X=u(),pe=async()=>{try{const t=await Re();X.value=t.data}catch(t){console.log(t)}},N=u([]),Y=u(!0),G=u(!0),me=t=>{console.log(t),N.value=t.map(e=>e.dictId),Y.value=t.length!=1,G.value=!t.length},ve=()=>{C(),E.value="字典添加",n.value.dictStatus="0",n.value.dictType=K.value,S.value.koiOpen(),w("添加🌻")},ge=async t=>{if(t==null||t==""){A("请选择需要修改的数据🌻");return}try{const e=await Qe(t);console.log(e.data),n.value=e.data}catch(e){x("数据获取失败，请刷新重试🌻"),console.log(e)}},H=async t=>{C(),E.value="字典修改";const e=t?t.dictId:N.value[0];(e==null||e=="")&&h("请选中需要修改的数据🌻"),console.log(e),ge(e),S.value.koiOpen(),w("修改🌻")},S=u(),E=u("字典管理"),F=u();let n=u({dictId:null,dictType:null,dictLabel:null,dictValue:null,dictStatus:null,dictTag:null,dictColor:null,sorted:1,remark:null});const C=()=>{n.value={dictId:null,dictType:null,dictLabel:null,dictValue:null,dictStatus:null,dictTag:null,dictColor:null,sorted:1,remark:null}},fe=Be({dictLabel:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典数据",trigger:"blur"}],dictStatus:[{required:!0,message:"请输入选择字典状态",trigger:"blur"}]}),b=u(!1),_e=()=>{F.value&&(b.value=!0,F.value.validate(async t=>{if(t){if(console.log("表单ID",n.value.dictId),n.value.dictId!=null&&n.value.dictId!="")try{await Me(n.value),w("修改成功🌻"),b.value=!1,S.value.koiQuickClose(),C(),c()}catch(e){console.log(e),b.value=!1,x("修改失败，请刷新重试🌻")}else try{await $e(n.value),w("添加成功🌻"),b.value=!1,S.value.koiQuickClose(),C(),c()}catch(e){console.log(e),b.value=!1,x("添加失败，请刷新重试🌻")}W()}else h("验证失败，请检查填写内容🌻"),b.value=!1}))},ye=()=>{S.value.koiClose()},be=t=>{let e=t.dictStatus==="0"?"启用":"停用";j("确认要["+e+"]-["+t.dictLabel+"]字典吗？").then(async()=>{if(C(),!t.dictId||!t.dictStatus){A("请选择需要修改的数据🌻");return}try{await Ee(t.dictId,t.dictStatus),w("修改成功🌻")}catch(g){console.log(g),T(),x("修改失败，请刷新重试🌻")}}).catch(()=>{h("已取消🌻")})},he=t=>{const e=t.dictId;if(e==null||e==""){A("请选中需要删除的数据🌻");return}j("您确认需要删除字典名称["+t.dictLabel+"]么？").then(async()=>{try{await Fe(e),T(),w("删除成功🌻")}catch(g){console.log(g),T(),x("删除失败，请刷新重试🌻")}}).catch(()=>{h("已取消🌻")})},Ve=()=>{if(N.value.length==0){Oe("请选择需要删除的数据🌻");return}j("您确认需要进行批量删除么？").then(async()=>{try{await qe(N.value),T(),w("批量删除成功🌻")}catch(t){console.log(t),T(),x("批量删除失败，请刷新重试🌻")}}).catch(()=>{h("已取消🌻")})};return(t,e)=>{const g=d("el-option"),z=d("el-select"),p=d("el-form-item"),L=d("el-input"),y=d("el-button"),J=d("el-form"),m=d("el-col"),we=d("KoiToolbar"),D=d("el-row"),f=d("el-table-column"),Se=d("KoiTag"),ke=d("el-switch"),Z=d("el-tooltip"),xe=d("el-table"),Te=d("el-pagination"),Ce=d("el-input-number"),Le=d("KoiDialog"),De=d("KoiCard"),Ie=P("throttle"),Ue=P("debounce"),k=P("auth"),Ke=P("loading");return r(),q("div",je,[l(De,null,{default:a(()=>[v(l(J,{inline:!0},{default:a(()=>[l(p,{label:"字典类型",prop:"dictType"},{default:a(()=>[l(z,{modelValue:s.value.dictType,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.dictType=o),clearable:"",style:{width:"240px"},onKeyup:Q(c,["enter","native"])},{default:a(()=>[(r(!0),q(te,null,ae(X.value,o=>(r(),_(g,{key:o.dictType,label:o.dictName,value:o.dictType},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"字典名称",prop:"dictLabel"},{default:a(()=>[l(L,{placeholder:"请输入字典名称",modelValue:s.value.dictLabel,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.dictLabel=o),clearable:"",style:{width:"240px"},onKeyup:Q(c,["enter","native"])},null,8,["modelValue"])]),_:1}),l(p,{label:"字典状态",prop:"dictStatus"},{default:a(()=>[l(z,{placeholder:"请选择字典状态",modelValue:s.value.dictStatus,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.dictStatus=o),clearable:"",style:{width:"240px"},onKeyup:Q(c,["enter","native"])},{default:a(()=>[l(g,{label:"启用",value:"0"}),l(g,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[v((r(),_(y,{type:"primary",icon:"search",plain:""},{default:a(()=>e[16]||(e[16]=[V("搜索")])),_:1,__:[16]})),[[Ie,se]]),v((r(),_(y,{type:"danger",icon:"refresh",plain:""},{default:a(()=>e[17]||(e[17]=[V("重置")])),_:1,__:[17]})),[[Ue,ie]])]),_:1})]),_:1},512),[[le,R.value]]),l(D,{gutter:10},{default:a(()=>[v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=o=>ve())},{default:a(()=>e[18]||(e[18]=[V("新增")])),_:1,__:[18]})]),_:1})),[[k,["system:role:add"]]]),v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=o=>H()),disabled:Y.value},{default:a(()=>e[19]||(e[19]=[V("修改")])),_:1,__:[19]},8,["disabled"])]),_:1})),[[k,["system:role:update"]]]),v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=o=>Ve()),disabled:G.value},{default:a(()=>e[20]||(e[20]=[V("删除")])),_:1,__:[20]},8,["disabled"])]),_:1})),[[k,["system:role:delete"]]]),v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"warning",icon:"download",plain:""},{default:a(()=>e[21]||(e[21]=[V("导出")])),_:1,__:[21]})]),_:1})),[[k,["system:role:export"]]]),l(we,{showSearch:R.value,"onUpdate:showSearch":e[6]||(e[6]=o=>R.value=o),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[22]||(e[22]=ee("br",null,null,-1)),v((r(),_(xe,{border:"",data:I.value,"empty-text":"暂时没有数据哟🌻",onSelectionChange:me},{default:a(()=>[l(f,{type:"selection",width:"55",align:"center"}),l(f,{label:"序号",prop:"dictId",width:"120px",align:"center",type:"index"}),l(f,{label:"字典类型",prop:"dictType",width:"180px",align:"center"}),l(f,{label:"字典名称",prop:"dictValue",width:"120px","show-overflow-tooltip":!0,align:"center"},{default:a(o=>[l(Se,{tagOptions:$.value,value:o.row.dictValue},null,8,["tagOptions","value"])]),_:1}),l(f,{label:"字典键值",prop:"dictValue",width:"120px",align:"center"}),l(f,{label:"字典状态",prop:"dictStatus",width:"100px",align:"center"},{default:a(o=>[l(ke,{modelValue:o.row.dictStatus,"onUpdate:modelValue":B=>o.row.dictStatus=B,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:B=>be(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(f,{label:"字典排序",prop:"sorted",width:"100px",align:"center"}),l(f,{label:"字典备注",prop:"remark",width:"260px","show-overflow-tooltip":!0,align:"center"}),l(f,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),l(f,{label:"操作",align:"center",width:"120",fixed:"right"},{default:a(({row:o})=>[l(Z,{content:"修改🌻",placement:"top"},{default:a(()=>[v(l(y,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:B=>H(o)},null,8,["onClick"]),[[k,["system:role:update"]]])]),_:2},1024),l(Z,{content:"删除🌻",placement:"top"},{default:a(()=>[v(l(y,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:B=>he(o)},null,8,["onClick"]),[[k,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ke,O.value]]),e[23]||(e[23]=ee("br",null,null,-1)),v(l(Te,{background:"","current-page":s.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=o=>s.value.pageNo=o),"page-size":s.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=o=>s.value.pageSize=o),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[le,U.value>0]]),l(Le,{ref_key:"koiDialogRef",ref:S,title:E.value,onKoiConfirm:_e,onKoiCancel:ye,loading:b.value},{content:a(()=>[l(J,{ref_key:"formRef",ref:F,rules:fe,model:i(n),"label-width":"80px","status-icon":""},{default:a(()=>[l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:12}},{default:a(()=>[l(p,{label:"字典名称",prop:"dictLabel"},{default:a(()=>[l(L,{modelValue:i(n).dictLabel,"onUpdate:modelValue":e[9]||(e[9]=o=>i(n).dictLabel=o),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:a(()=>[l(p,{label:"字典数据",prop:"dictValue"},{default:a(()=>[l(L,{modelValue:i(n).dictValue,"onUpdate:modelValue":e[10]||(e[10]=o=>i(n).dictValue=o),placeholder:"请输入字典数据",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:12}},{default:a(()=>[l(p,{label:"标签类型",prop:"dictTag"},{default:a(()=>[l(z,{modelValue:i(n).dictTag,"onUpdate:modelValue":e[11]||(e[11]=o=>i(n).dictTag=o),placeholder:"请选择标签类型",style:{width:"240px"}},{default:a(()=>[(r(!0),q(te,null,ae(M.value,o=>(r(),_(g,{key:o.dictValue,label:o.dictLabel,value:o.dictTag,clearable:""},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:a(()=>[l(p,{label:"字典状态",prop:"dictStatus"},{default:a(()=>[l(z,{modelValue:i(n).dictStatus,"onUpdate:modelValue":e[12]||(e[12]=o=>i(n).dictStatus=o),placeholder:"请选择字典状态",style:{width:"260px"},clearable:""},{default:a(()=>[l(g,{label:"启用",value:"0"}),l(g,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:12}},{default:a(()=>[l(p,{label:"标签颜色",prop:"dictColor"},{default:a(()=>[l(L,{modelValue:i(n).dictColor,"onUpdate:modelValue":e[13]||(e[13]=o=>i(n).dictColor=o),placeholder:"请输入背景颜色(16进制)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:a(()=>[l(p,{label:"字典排序",prop:"sorted"},{default:a(()=>[l(Ce,{modelValue:i(n).sorted,"onUpdate:modelValue":e[14]||(e[14]=o=>i(n).sorted=o),style:{width:"260px"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:24}},{default:a(()=>[l(p,{label:"字典备注",prop:"remark"},{default:a(()=>[l(L,{modelValue:i(n).remark,"onUpdate:modelValue":e[15]||(e[15]=o=>i(n).remark=o),rows:3,type:"textarea",placeholder:"请输入字典备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),V(" "+Pe(i(n)),1)]),_:1},8,["title","loading"])]),_:1,__:[22,23]})])}}});export{Ge as default};
