import{d as de,r as u,o as Ne,P as ze,a as Be,e as q,f as l,w as a,g as d,I as h,Q as v,j as ee,R as le,D as Q,F as te,l as ae,y as _,k as V,S as P,z as i,t as Pe,T as w,U as x,V as j,W as A,X as Oe,i as r}from"./index-_hVn5I9W.js";import{l as oe,a as Re,b as ne,u as Me,c as $e,d as Ee,e as Fe,f as qe,g as Qe}from"./index-pEi6Mg1z.js";const je={class:"koi-flex"},Ae=de({name:"dictDataPage"}),Ge=de({...Ae,setup(We){const O=u(!1),R=u(!0),I=u([{dictId:1,dictType:"YU-ADMINðŸŒ»",dictLabel:"å¤©æ‰",dictStatus:"0",sorted:1,remark:"è¶…çº§ç®¡ç†å‘˜",createTime:"2023-08-08 23:00:00"},{dictId:2,dictType:"å¼ å¤§ä»™",dictLabel:"å°å¤©æ‰",dictStatus:"0",sorted:2,remark:"è™Žç‰™688ï¼Œæ¯æ™šä¸ƒç‚¹åŠï¼Œä¸è§ä¸æ•£ï¼",createTime:"2023-08-08 23:00:00"},{dictId:3,dictType:"èœé¸¡",dictLabel:"å¹²é¥­",dictStatus:"1",sorted:3,remark:"å°å°èœé¸¡ï¼Œå¯ç¬‘å¯ç¬‘",createTime:"2023-08-08 23:00:00"}]),s=u({pageNo:1,pageSize:10,dictType:"",dictLabel:"",dictStatus:""}),U=u(0),ue=()=>{s.value={pageNo:1,pageSize:10,dictLabel:"",dictStatus:"",dictType:K.value}},se=()=>{console.log("æœç´¢"),s.value.pageNo=1,c()},ie=()=>{console.log("é‡ç½®æœç´¢"),ue(),c()},c=async()=>{try{O.value=!0,I.value=[];const t=await ne(s.value);console.log("å­—å…¸æ•°æ®è¡¨æ ¼æ•°æ®->",t.data),I.value=t.data.records,U.value=t.data.total,O.value=!1}catch(t){console.log(t),h("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}},T=async()=>{try{const t=await ne(s.value);console.log("å­—å…¸æ•°æ®è¡¨æ ¼æ•°æ®->",t.data),I.value=t.data.records,U.value=t.data.total,console.log("å­—å…¸æ•°æ®è¡¨æ ¼æ•°æ®")}catch(t){console.log(t),h("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}},re=ze();let K=u();Ne(()=>{K.value=re.params.dictType||"",s.value.dictType=K.value,c(),pe(),ce(),W()});const M=u(),ce=async()=>{try{M.value=[];const t=await oe("sys_tag_type");console.log("å­—å…¸æ•°æ®",t.data),M.value=t.data}catch(t){console.log(t)}},$=u(),W=async()=>{try{$.value=[];const t=await oe(s.value.dictType);console.log("å­—å…¸æ•°æ®",t.data),$.value=t.data}catch(t){console.log(t)}},X=u(),pe=async()=>{try{const t=await Re();X.value=t.data}catch(t){console.log(t)}},N=u([]),Y=u(!0),G=u(!0),me=t=>{console.log(t),N.value=t.map(e=>e.dictId),Y.value=t.length!=1,G.value=!t.length},ve=()=>{C(),E.value="å­—å…¸æ·»åŠ ",n.value.dictStatus="0",n.value.dictType=K.value,S.value.koiOpen(),w("æ·»åŠ ðŸŒ»")},ge=async t=>{if(t==null||t==""){A("è¯·é€‰æ‹©éœ€è¦ä¿®æ”¹çš„æ•°æ®ðŸŒ»");return}try{const e=await Qe(t);console.log(e.data),n.value=e.data}catch(e){x("æ•°æ®èŽ·å–å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»"),console.log(e)}},H=async t=>{C(),E.value="å­—å…¸ä¿®æ”¹";const e=t?t.dictId:N.value[0];(e==null||e=="")&&h("è¯·é€‰ä¸­éœ€è¦ä¿®æ”¹çš„æ•°æ®ðŸŒ»"),console.log(e),ge(e),S.value.koiOpen(),w("ä¿®æ”¹ðŸŒ»")},S=u(),E=u("å­—å…¸ç®¡ç†"),F=u();let n=u({dictId:null,dictType:null,dictLabel:null,dictValue:null,dictStatus:null,dictTag:null,dictColor:null,sorted:1,remark:null});const C=()=>{n.value={dictId:null,dictType:null,dictLabel:null,dictValue:null,dictStatus:null,dictTag:null,dictColor:null,sorted:1,remark:null}},fe=Be({dictLabel:[{required:!0,message:"è¯·è¾“å…¥å­—å…¸åç§°",trigger:"blur"}],dictValue:[{required:!0,message:"è¯·è¾“å…¥å­—å…¸æ•°æ®",trigger:"blur"}],dictStatus:[{required:!0,message:"è¯·è¾“å…¥é€‰æ‹©å­—å…¸çŠ¶æ€",trigger:"blur"}]}),b=u(!1),_e=()=>{F.value&&(b.value=!0,F.value.validate(async t=>{if(t){if(console.log("è¡¨å•ID",n.value.dictId),n.value.dictId!=null&&n.value.dictId!="")try{await Me(n.value),w("ä¿®æ”¹æˆåŠŸðŸŒ»"),b.value=!1,S.value.koiQuickClose(),C(),c()}catch(e){console.log(e),b.value=!1,x("ä¿®æ”¹å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}else try{await $e(n.value),w("æ·»åŠ æˆåŠŸðŸŒ»"),b.value=!1,S.value.koiQuickClose(),C(),c()}catch(e){console.log(e),b.value=!1,x("æ·»åŠ å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}W()}else h("éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¡«å†™å†…å®¹ðŸŒ»"),b.value=!1}))},ye=()=>{S.value.koiClose()},be=t=>{let e=t.dictStatus==="0"?"å¯ç”¨":"åœç”¨";j("ç¡®è®¤è¦["+e+"]-["+t.dictLabel+"]å­—å…¸å—ï¼Ÿ").then(async()=>{if(C(),!t.dictId||!t.dictStatus){A("è¯·é€‰æ‹©éœ€è¦ä¿®æ”¹çš„æ•°æ®ðŸŒ»");return}try{await Ee(t.dictId,t.dictStatus),w("ä¿®æ”¹æˆåŠŸðŸŒ»")}catch(g){console.log(g),T(),x("ä¿®æ”¹å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}}).catch(()=>{h("å·²å–æ¶ˆðŸŒ»")})},he=t=>{const e=t.dictId;if(e==null||e==""){A("è¯·é€‰ä¸­éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}j("æ‚¨ç¡®è®¤éœ€è¦åˆ é™¤å­—å…¸åç§°["+t.dictLabel+"]ä¹ˆï¼Ÿ").then(async()=>{try{await Fe(e),T(),w("åˆ é™¤æˆåŠŸðŸŒ»")}catch(g){console.log(g),T(),x("åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}}).catch(()=>{h("å·²å–æ¶ˆðŸŒ»")})},Ve=()=>{if(N.value.length==0){Oe("è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}j("æ‚¨ç¡®è®¤éœ€è¦è¿›è¡Œæ‰¹é‡åˆ é™¤ä¹ˆï¼Ÿ").then(async()=>{try{await qe(N.value),T(),w("æ‰¹é‡åˆ é™¤æˆåŠŸðŸŒ»")}catch(t){console.log(t),T(),x("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}}).catch(()=>{h("å·²å–æ¶ˆðŸŒ»")})};return(t,e)=>{const g=d("el-option"),z=d("el-select"),p=d("el-form-item"),L=d("el-input"),y=d("el-button"),J=d("el-form"),m=d("el-col"),we=d("KoiToolbar"),D=d("el-row"),f=d("el-table-column"),Se=d("KoiTag"),ke=d("el-switch"),Z=d("el-tooltip"),xe=d("el-table"),Te=d("el-pagination"),Ce=d("el-input-number"),Le=d("KoiDialog"),De=d("KoiCard"),Ie=P("throttle"),Ue=P("debounce"),k=P("auth"),Ke=P("loading");return r(),q("div",je,[l(De,null,{default:a(()=>[v(l(J,{inline:!0},{default:a(()=>[l(p,{label:"å­—å…¸ç±»åž‹",prop:"dictType"},{default:a(()=>[l(z,{modelValue:s.value.dictType,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.dictType=o),clearable:"",style:{width:"240px"},onKeyup:Q(c,["enter","native"])},{default:a(()=>[(r(!0),q(te,null,ae(X.value,o=>(r(),_(g,{key:o.dictType,label:o.dictName,value:o.dictType},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"å­—å…¸åç§°",prop:"dictLabel"},{default:a(()=>[l(L,{placeholder:"è¯·è¾“å…¥å­—å…¸åç§°",modelValue:s.value.dictLabel,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.dictLabel=o),clearable:"",style:{width:"240px"},onKeyup:Q(c,["enter","native"])},null,8,["modelValue"])]),_:1}),l(p,{label:"å­—å…¸çŠ¶æ€",prop:"dictStatus"},{default:a(()=>[l(z,{placeholder:"è¯·é€‰æ‹©å­—å…¸çŠ¶æ€",modelValue:s.value.dictStatus,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.dictStatus=o),clearable:"",style:{width:"240px"},onKeyup:Q(c,["enter","native"])},{default:a(()=>[l(g,{label:"å¯ç”¨",value:"0"}),l(g,{label:"åœç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[v((r(),_(y,{type:"primary",icon:"search",plain:""},{default:a(()=>e[16]||(e[16]=[V("æœç´¢")])),_:1,__:[16]})),[[Ie,se]]),v((r(),_(y,{type:"danger",icon:"refresh",plain:""},{default:a(()=>e[17]||(e[17]=[V("é‡ç½®")])),_:1,__:[17]})),[[Ue,ie]])]),_:1})]),_:1},512),[[le,R.value]]),l(D,{gutter:10},{default:a(()=>[v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=o=>ve())},{default:a(()=>e[18]||(e[18]=[V("æ–°å¢ž")])),_:1,__:[18]})]),_:1})),[[k,["system:role:add"]]]),v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=o=>H()),disabled:Y.value},{default:a(()=>e[19]||(e[19]=[V("ä¿®æ”¹")])),_:1,__:[19]},8,["disabled"])]),_:1})),[[k,["system:role:update"]]]),v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=o=>Ve()),disabled:G.value},{default:a(()=>e[20]||(e[20]=[V("åˆ é™¤")])),_:1,__:[20]},8,["disabled"])]),_:1})),[[k,["system:role:delete"]]]),v((r(),_(m,{span:1.5},{default:a(()=>[l(y,{type:"warning",icon:"download",plain:""},{default:a(()=>e[21]||(e[21]=[V("å¯¼å‡º")])),_:1,__:[21]})]),_:1})),[[k,["system:role:export"]]]),l(we,{showSearch:R.value,"onUpdate:showSearch":e[6]||(e[6]=o=>R.value=o),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[22]||(e[22]=ee("br",null,null,-1)),v((r(),_(xe,{border:"",data:I.value,"empty-text":"æš‚æ—¶æ²¡æœ‰æ•°æ®å“ŸðŸŒ»",onSelectionChange:me},{default:a(()=>[l(f,{type:"selection",width:"55",align:"center"}),l(f,{label:"åºå·",prop:"dictId",width:"120px",align:"center",type:"index"}),l(f,{label:"å­—å…¸ç±»åž‹",prop:"dictType",width:"180px",align:"center"}),l(f,{label:"å­—å…¸åç§°",prop:"dictValue",width:"120px","show-overflow-tooltip":!0,align:"center"},{default:a(o=>[l(Se,{tagOptions:$.value,value:o.row.dictValue},null,8,["tagOptions","value"])]),_:1}),l(f,{label:"å­—å…¸é”®å€¼",prop:"dictValue",width:"120px",align:"center"}),l(f,{label:"å­—å…¸çŠ¶æ€",prop:"dictStatus",width:"100px",align:"center"},{default:a(o=>[l(ke,{modelValue:o.row.dictStatus,"onUpdate:modelValue":B=>o.row.dictStatus=B,"active-text":"å¯ç”¨","inactive-text":"åœç”¨","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:B=>be(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(f,{label:"å­—å…¸æŽ’åº",prop:"sorted",width:"100px",align:"center"}),l(f,{label:"å­—å…¸å¤‡æ³¨",prop:"remark",width:"260px","show-overflow-tooltip":!0,align:"center"}),l(f,{label:"åˆ›å»ºæ—¶é—´",prop:"createTime",width:"180px",align:"center"}),l(f,{label:"æ“ä½œ",align:"center",width:"120",fixed:"right"},{default:a(({row:o})=>[l(Z,{content:"ä¿®æ”¹ðŸŒ»",placement:"top"},{default:a(()=>[v(l(y,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:B=>H(o)},null,8,["onClick"]),[[k,["system:role:update"]]])]),_:2},1024),l(Z,{content:"åˆ é™¤ðŸŒ»",placement:"top"},{default:a(()=>[v(l(y,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:B=>he(o)},null,8,["onClick"]),[[k,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ke,O.value]]),e[23]||(e[23]=ee("br",null,null,-1)),v(l(Te,{background:"","current-page":s.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=o=>s.value.pageNo=o),"page-size":s.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=o=>s.value.pageSize=o),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[le,U.value>0]]),l(Le,{ref_key:"koiDialogRef",ref:S,title:E.value,onKoiConfirm:_e,onKoiCancel:ye,loading:b.value},{content:a(()=>[l(J,{ref_key:"formRef",ref:F,rules:fe,model:i(n),"label-width":"80px","status-icon":""},{default:a(()=>[l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:12}},{default:a(()=>[l(p,{label:"å­—å…¸åç§°",prop:"dictLabel"},{default:a(()=>[l(L,{modelValue:i(n).dictLabel,"onUpdate:modelValue":e[9]||(e[9]=o=>i(n).dictLabel=o),placeholder:"è¯·è¾“å…¥å­—å…¸åç§°",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:a(()=>[l(p,{label:"å­—å…¸æ•°æ®",prop:"dictValue"},{default:a(()=>[l(L,{modelValue:i(n).dictValue,"onUpdate:modelValue":e[10]||(e[10]=o=>i(n).dictValue=o),placeholder:"è¯·è¾“å…¥å­—å…¸æ•°æ®",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:12}},{default:a(()=>[l(p,{label:"æ ‡ç­¾ç±»åž‹",prop:"dictTag"},{default:a(()=>[l(z,{modelValue:i(n).dictTag,"onUpdate:modelValue":e[11]||(e[11]=o=>i(n).dictTag=o),placeholder:"è¯·é€‰æ‹©æ ‡ç­¾ç±»åž‹",style:{width:"240px"}},{default:a(()=>[(r(!0),q(te,null,ae(M.value,o=>(r(),_(g,{key:o.dictValue,label:o.dictLabel,value:o.dictTag,clearable:""},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:a(()=>[l(p,{label:"å­—å…¸çŠ¶æ€",prop:"dictStatus"},{default:a(()=>[l(z,{modelValue:i(n).dictStatus,"onUpdate:modelValue":e[12]||(e[12]=o=>i(n).dictStatus=o),placeholder:"è¯·é€‰æ‹©å­—å…¸çŠ¶æ€",style:{width:"260px"},clearable:""},{default:a(()=>[l(g,{label:"å¯ç”¨",value:"0"}),l(g,{label:"åœç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:12}},{default:a(()=>[l(p,{label:"æ ‡ç­¾é¢œè‰²",prop:"dictColor"},{default:a(()=>[l(L,{modelValue:i(n).dictColor,"onUpdate:modelValue":e[13]||(e[13]=o=>i(n).dictColor=o),placeholder:"è¯·è¾“å…¥èƒŒæ™¯é¢œè‰²(16è¿›åˆ¶)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:a(()=>[l(p,{label:"å­—å…¸æŽ’åº",prop:"sorted"},{default:a(()=>[l(Ce,{modelValue:i(n).sorted,"onUpdate:modelValue":e[14]||(e[14]=o=>i(n).sorted=o),style:{width:"260px"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(m,{xs:{span:24},sm:{span:24}},{default:a(()=>[l(p,{label:"å­—å…¸å¤‡æ³¨",prop:"remark"},{default:a(()=>[l(L,{modelValue:i(n).remark,"onUpdate:modelValue":e[15]||(e[15]=o=>i(n).remark=o),rows:3,type:"textarea",placeholder:"è¯·è¾“å…¥å­—å…¸å¤‡æ³¨"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),V(" "+Pe(i(n)),1)]),_:1},8,["title","loading"])]),_:1,__:[22,23]})])}}});export{Ge as default};
