import{af as C,d as B,r as d,o as ne,g as a,S as f,e as se,i as c,f as o,w as l,Q as p,j as P,D as k,y as b,k as y,R as U,t as ie,W as re,V as M,T,U as x,I as z,X as de,ah as pe}from"./index-_hVn5I9W.js";const ue=u=>C.get("/koi/sysLoginLog/listPage",u),ge=u=>C.post("/koi/sysLoginLog/deleteById/"+u),ce=u=>C.post("/koi/sysLoginLog/batchDelete",u),me={class:"koi-flex"},_e=B({name:"loginlogPage"}),he=B({..._e,setup(u){const K=d(!1),S=d(!0),D=d([{loginId:1,loginName:"YU-ADMINðŸŒ»",ipAddress:"127.0.0.1",loginAddress:"æ²³å—çœ éƒ‘å·žå¸‚",loginStatus:"0",deviceName:"PC",browser:"Chrome 11",os:"Windows 10",message:"YU-ADMINðŸŒ»",loginTime:"2023-08-08 23:00:00"},{loginId:2,loginName:"å¼ å¤§ä»™ðŸŒ»",ipAddress:"127.0.0.1",loginAddress:"æ²³å—çœ éƒ‘å·žå¸‚",loginStatus:"0",deviceName:"PC",browser:"Chrome 11",os:"Windows 10",message:"YU-ADMINðŸŒ»",loginTime:"2023-08-08 23:00:00"},{loginId:3,loginName:"çŽ‹å°†ðŸŒ»",ipAddress:"127.0.0.1",loginAddress:"æ²³å—çœ éƒ‘å·žå¸‚",loginStatus:"0",deviceName:"PC",browser:"Chrome 11",os:"Windows 10",message:"YU-ADMINðŸŒ»",loginTime:"2023-08-08 23:00:00"}]),s=d({pageNo:1,pageSize:10,loginName:"",ipAddress:"",loginStatus:""}),m=d(0),_=d(),L=()=>{_.value=[],s.value={pageNo:1,pageSize:10,loginName:"",ipAddress:"",loginStatus:""}},Y=()=>{console.log("æœç´¢"),s.value.pageNo=1,r()},W=()=>{console.log("é‡ç½®æœç´¢"),L(),r()},r=async()=>{m.value=200},v=async()=>{try{const n=await ue(pe(s.value,_.value));console.log("æ—¥å¿—æ•°æ®è¡¨æ ¼æ•°æ®->",n.data),D.value=n.data.records,m.value=n.data.total}catch(n){console.log(n),x("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}};ne(()=>{r()});const N=d([]),E=d(!0),A=d(!0),R=n=>{N.value=n.map(e=>e.loginId),E.value=n.length!=1,A.value=!n.length},j=n=>{const e=n.loginId;if(e==null||e==""){re("è¯·é€‰ä¸­éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}M("æ‚¨ç¡®è®¤éœ€è¦åˆ é™¤ç”¨æˆ·åç§°["+n.loginName+"]ä¹ˆï¼Ÿ").then(async()=>{try{await ge(e),v(),T("åˆ é™¤æˆåŠŸðŸŒ»")}catch(w){console.log(w),v(),x("åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}}).catch(()=>{z("å·²å–æ¶ˆðŸŒ»")})},H=()=>{if(N.value.length==0){de("è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}M("æ‚¨ç¡®è®¤éœ€è¦è¿›è¡Œæ‰¹é‡åˆ é™¤ä¹ˆï¼Ÿ").then(async()=>{try{await ce(N.value),v(),T("æ‰¹é‡åˆ é™¤æˆåŠŸðŸŒ»")}catch(n){console.log(n),x("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»"),v()}}).catch(()=>{z("å·²å–æ¶ˆðŸŒ»")})};return(n,e)=>{const w=a("el-input"),g=a("el-form-item"),I=a("el-option"),$=a("el-select"),Q=a("el-date-picker"),h=a("el-button"),X=a("el-form"),q=a("el-col"),F=a("KoiToolbar"),G=a("el-row"),i=a("el-table-column"),J=a("el-tag"),O=a("el-tooltip"),Z=a("el-table"),ee=a("el-pagination"),oe=a("KoiCard"),te=f("debounce"),le=f("throttle"),V=f("auth"),ae=f("loading");return c(),se("div",me,[o(oe,null,{default:l(()=>[p(o(X,{inline:!0},{default:l(()=>[o(g,{label:"ç”¨æˆ·åç§°",prop:"loginName"},{default:l(()=>[o(w,{placeholder:"è¯·è¾“å…¥ç”¨æˆ·åç§°",modelValue:s.value.loginName,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.loginName=t),style:{width:"200px"},clearable:"",onKeyup:k(r,["enter","native"])},null,8,["modelValue"])]),_:1}),o(g,{label:"IPåœ°å€",prop:"ipAddress"},{default:l(()=>[o(w,{placeholder:"è¯·è¾“å…¥IPåœ°å€",modelValue:s.value.ipAddress,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.ipAddress=t),style:{width:"200px"},clearable:"",onKeyup:k(r,["enter","native"])},null,8,["modelValue"])]),_:1}),o(g,{label:"ç™»å½•çŠ¶æ€",prop:"loginStatus"},{default:l(()=>[o($,{placeholder:"è¯·é€‰æ‹©æ—¥å¿—çŠ¶æ€",modelValue:s.value.loginStatus,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.loginStatus=t),style:{width:"200px"},clearable:"",onKeyup:k(r,["enter","native"])},{default:l(()=>[o(I,{label:"ç™»å½•æˆåŠŸ",value:"0"}),o(I,{label:"ç™»å½•å¤±è´¥",value:"1"})]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"è®¿é—®æ—¶é—´",prop:"loginTime"},{default:l(()=>[o(Q,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=t=>_.value=t),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":"å¼€å§‹æ—¥æœŸ","range-separator":"è‡³","end-placeholder":"ç»“æŸæ—¥æœŸ","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),o(g,null,{default:l(()=>[p((c(),b(h,{type:"primary",icon:"search",plain:""},{default:l(()=>e[8]||(e[8]=[y("æœç´¢")])),_:1,__:[8]})),[[te,Y]]),p((c(),b(h,{type:"danger",icon:"refresh",plain:""},{default:l(()=>e[9]||(e[9]=[y("é‡ç½®")])),_:1,__:[9]})),[[le,W]])]),_:1})]),_:1},512),[[U,S.value]]),o(G,{gutter:10},{default:l(()=>[p((c(),b(q,{span:1.5},{default:l(()=>[o(h,{type:"danger",icon:"delete",plain:"",onClick:e[4]||(e[4]=t=>H()),disabled:A.value},{default:l(()=>e[10]||(e[10]=[y("åˆ é™¤")])),_:1,__:[10]},8,["disabled"])]),_:1})),[[V,["system:role:delete"]]]),o(F,{showSearch:S.value,"onUpdate:showSearch":e[5]||(e[5]=t=>S.value=t),onRefreshTable:r},null,8,["showSearch"])]),_:1}),e[11]||(e[11]=P("br",null,null,-1)),p((c(),b(Z,{border:"",data:D.value,"empty-text":"æš‚æ—¶æ²¡æœ‰æ•°æ®å“ŸðŸŒ»",onSelectionChange:R},{default:l(()=>[o(i,{type:"selection",width:"55",align:"center"}),o(i,{label:"åºå·",prop:"loginId",width:"80px",align:"center",type:"index"}),o(i,{label:"ç™»å½•ç”¨æˆ·",prop:"loginName",width:"130px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"IPåœ°å€",prop:"ipAddress",width:"160px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"ç™»å½•åœ°å€",prop:"loginAddress",width:"260px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"ç™»å½•çŠ¶æ€",prop:"loginStatus",width:"100px",align:"center","show-overflow-tooltip":!0},{default:l(t=>[o(J,{type:t.row.loginStatus=="0"?"primary":t.row.loginStatus=="1"?"danger":"warning"},{default:l(()=>[y(ie(t.row.loginStatus=="0"?"ç™»å½•æˆåŠŸ":t.row.loginStatus=="1"?"ç™»å½•å¤±è´¥":"æœªçŸ¥çŠ¶æ€"),1)]),_:2},1032,["type"])]),_:1}),o(i,{label:"è®¾å¤‡åç§°",prop:"deviceName",width:"150px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"æµè§ˆå™¨",prop:"browser",width:"150px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"æ“ä½œç³»ç»Ÿ",prop:"os",width:"150px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"ç™»å½•ä¿¡æ¯",prop:"message",width:"150px",align:"center","show-overflow-tooltip":!0}),o(i,{label:"ç™»å½•æ—¶é—´",prop:"loginTime",width:"180px",align:"center"}),o(i,{label:"æ“ä½œ",align:"center",width:"120",fixed:"right"},{default:l(({row:t})=>[o(O,{content:"åˆ é™¤ðŸŒ»",placement:"top"},{default:l(()=>[p(o(h,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:ve=>j(t)},null,8,["onClick"]),[[V,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ae,K.value]]),e[12]||(e[12]=P("br",null,null,-1)),p(o(ee,{background:"","current-page":s.value.pageNo,"onUpdate:currentPage":e[6]||(e[6]=t=>s.value.pageNo=t),"page-size":s.value.pageSize,"onUpdate:pageSize":e[7]||(e[7]=t=>s.value.pageSize=t),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:m.value,onSizeChange:r,onCurrentChange:r},null,8,["current-page","page-size","total"]),[[U,m.value>0]])]),_:1,__:[11,12]})])}}});export{he as default};
