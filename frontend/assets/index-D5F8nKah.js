import{af as x,d as ie,r as s,o as Ye,I as w,a as Ae,g as r,S as K,e as ne,i as m,f as a,w as l,Q as p,j as D,D as $,y as b,k as y,R as se,z as d,F as Oe,l as $e,t as Ge,H as ue,T as V,U as N,V as G,W as J,X as Je,ah as Fe,_ as Qe}from"./index-_hVn5I9W.js";import{e as je,f as He}from"./index-DiRUQRLM.js";const We=i=>x.get("/koi/sysLoginUser/listPage",i),Xe=i=>x.get("/koi/sysLoginUser/getById/"+i),Ze=i=>x.post("/koi/sysLoginUser/update",i),ea=i=>x.post("/koi/sysLoginUser/add",i),aa=i=>x.post("/koi/sysLoginUser/deleteById/"+i),la=i=>x.post("/koi/sysLoginUser/batchDelete",i),ta=(i,M)=>x.post("/koi/sysLoginUser/updateStatus/"+i+"/"+M),oa={class:"koi-flex"},ra={class:"flex justify-center"},na={class:"flex flex-justify-center"},sa=ie({name:"userPage"}),ua=ie({...sa,setup(i){const M=s(!1),P=s(!0),F=s([{userId:1,loginName:"YU-ADMIN",userName:"超级管理员",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://pic4.zhimg.com/v2-702a23ebb518199355099df77a3cfe07_b.webp",userStatus:"0",remark:"管理员",createTime:"2023-08-06 04:00:00"},{userId:2,loginName:"KOI",userName:"小锦鲤",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://pic2.zhimg.com/v2-44ce1b82f7e68de4078bf513221619e1_b.webp",userStatus:"0",remark:"管理员",createTime:"2023-08-07 04:00:00"},{userId:3,loginName:"YXT",userName:"于金金",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://pic1.zhimg.com/v2-3cbc889feac057cc7fb85a40c82598dc_b.webp",userStatus:"0",remark:"管理员",createTime:"2023-08-08 04:00:00"},{userId:4,loginName:"orange",userName:"迪迦",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://pic3.zhimg.com/v2-b6c350529f3c06c8a90d886c311f3866_b.webp",userStatus:"0",remark:"远古时代战士",createTime:"2023-08-06 04:00:00"},{userId:5,loginName:"apple",userName:"盖亚",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://pic2.zhimg.com/v2-430e1a7dd0508a0b4b01dca9b94b22f5_b.webp",userStatus:"0",remark:"远古时代战士",createTime:"2023-08-07 04:00:00"},{userId:6,loginName:"banana",userName:"阿古茹",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://pic3.zhimg.com/v2-6e8ff25c222b6302cb836c9f6b013e7e_b.webp",userStatus:"0",remark:"远古时代战士",createTime:"2023-08-08 04:00:00"},{userId:7,loginName:"pear",userName:"帝骑",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://pic2.zhimg.com/v2-d75d120cdab34142933ad9df18508ad1_b.webp",userStatus:"0",remark:"假面骑士",createTime:"2023-08-06 04:00:00"},{userId:8,loginName:"pineapple",userName:"创骑",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://pic3.zhimg.com/v2-a42559223697c17188a75ad3a10e1cea_b.webp",userStatus:"0",remark:"假面骑士",createTime:"2023-08-07 04:00:00"},{userId:9,loginName:"mango",userName:"时王",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://img0.baidu.com/it/u=1752705848,3929873216&fm=253&app=138&size=w931&n=0&f=JPEG",userStatus:"0",remark:"假面骑士",createTime:"2023-08-08 04:00:00"},{userId:10,loginName:"plum",userName:"海绵宝宝",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://img1.baidu.com/it/u=3941674148,2170642163&fm=253&fmt=auto&app=138&f=JPEG?w=255&h=255",userStatus:"0",remark:"地底世界",createTime:"2023-08-06 04:00:00"},{userId:11,loginName:"watermelon",userName:"派大星",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://img2.baidu.com/it/u=1519337523,3739613381&fm=253&fmt=auto&app=120&f=JPEG?w=600&h=600",userStatus:"0",remark:"地底世界",createTime:"2023-08-07 04:00:00"},{userId:12,loginName:"peach",userName:"章鱼哥",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://img2.baidu.com/it/u=71901679,703168528&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",userStatus:"0",remark:"地底世界",createTime:"2023-08-08 04:00:00"},{userId:13,loginName:"grape",userName:"光头强",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://img0.baidu.com/it/u=1121602739,1172990093&fm=253&fmt=auto&app=138&f=JPEG?w=380&h=378",userStatus:"0",remark:"熊出没",createTime:"2023-08-06 04:00:00"},{userId:14,loginName:"Blackberry",userName:"熊大",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://img1.baidu.com/it/u=1544796506,2220725573&fm=253&fmt=auto&app=120&f=JPEG?w=501&h=500",userStatus:"0",remark:"熊出没",createTime:"2023-08-07 04:00:00"},{userId:15,loginName:"Blueberry",userName:"熊二",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://img1.baidu.com/it/u=550431475,3093096287&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=514",userStatus:"0",remark:"熊出没",createTime:"2023-08-08 04:00:00"}]),u=s({pageNo:1,pageSize:10,loginName:"",userName:"",phone:""}),q=s(0),pe=()=>{u.value={pageNo:1,pageSize:10,loginName:"",userName:"",phone:""},z.value=[]},de=()=>{console.log("搜索"),u.value.pageNo=1,v()},ce=()=>{console.log("重置搜索"),pe(),v()},z=s(),v=async()=>{q.value=15},I=async()=>{try{const o=await We(Fe(u.value,z.value));F.value=o.data.records,q.value=o.data.total}catch(o){console.log(o),N("数据查询失败，请刷新重试🌻")}};Ye(()=>{v(),me(),ge()});const R=s(),me=async()=>{try{R.value=[{dictLabel:"系统用户",dictValue:"1",dictTag:"primary",dictColor:""},{dictLabel:"注册用户",dictValue:"2",dictTag:"warning",dictColor:""}]}catch(o){console.log(o),w("数据字典查询失败，请刷新重试🌻")}},Q=s(),ge=async()=>{try{Q.value=[{dictLabel:"男",dictValue:"1",dictTag:"primary",dictColor:""},{dictLabel:"女",dictValue:"2",dictTag:"danger",dictColor:""},{dictLabel:"未知",dictValue:"3",dictTag:"info",dictColor:""}]}catch(o){console.log(o),w("数据字典查询失败，请刷新重试🌻")}},C=s([]),B=s(!0),j=s(!0),ve=o=>{C.value=o.map(e=>e.userId),B.value=o.length!=1,j.value=!o.length},fe=()=>{U(),E.value="用户添加",n.value.userStatus="0",S.value.koiOpen(),ue("添加🌻")},be=async o=>{if(console.log("回显数据ID",o),o==null||o==""){J("请选择需要修改的数据🌻");return}try{const e=await Xe(o);console.log(e.data),n.value=e.data}catch(e){N("数据获取失败，请刷新重试🌻"),console.log(e)}},H=async o=>{U(),E.value="用户修改";const e=o?o.userId:C.value[0];(e==null||e=="")&&w("请选中需要修改的数据🌻"),console.log(e),be(e),S.value.koiOpen(),ue("修改🌻")},S=s(),E=s("用户类型管理"),Y=s();let n=s({userTitle:null,userType:null,userStatus:null,avatar:null,phone:null,remark:null});const U=()=>{n.value={userTitle:null,userType:null,userStatus:null,avatar:null,phone:null,remark:null}},_e=Ae({userTitle:[{required:!0,message:"请输入用户名字",trigger:"blur"}],userType:[{required:!0,message:"请输入用户类型",trigger:"blur"}],userStatus:[{required:!0,message:"请输入选择用户状态",trigger:"blur"}]}),T=s(!1),he=()=>{Y.value&&(T.value=!0,Y.value.validate(async o=>{if(o)if(console.log("表单ID",n.value.userId),n.value.userId!=null&&n.value.userId!="")try{await Ze(n.value),V("修改成功🌻"),T.value=!1,S.value.koiQuickClose(),U(),v()}catch(e){console.log(e),T.value=!1,N("修改失败，请刷新重试🌻")}else try{await ea(n.value),V("添加成功🌻"),T.value=!1,S.value.koiQuickClose(),U(),v()}catch(e){console.log(e),T.value=!1,N("添加失败，请刷新重试🌻")}else w("验证失败，请检查填写内容🌻"),T.value=!1}))},ye=()=>{S.value.koiClose()},ke=o=>{let e=o.userStatus==="0"?"启用":"停用";G("确认要["+e+"]-["+o.userName+"]吗？").then(async()=>{if(U(),!o.userId||!o.userStatus){J("请选择需要修改的数据🌻");return}try{await ta(o.userId,o.userStatus),V("修改成功🌻")}catch(_){console.log(_),N("修改失败，请刷新重试🌻"),I()}}).catch(()=>{w("已取消🌻")})},W=s(),X=async()=>{try{const o=await je(1);Z.value=o.data.data1,A.value=o.data.data2}catch(o){console.log(o),w("加载角色数据失败")}W.value.koiOpen()},A=s(["1"]),Z=s([{label:"王者农药",value:"1"},{label:"QQ飞车",value:"2"},{label:"举例数据",value:"3"},{label:"三国杀",value:"4"},{label:"和平精英",value:"5"},{label:"刺激战场",value:"6"}]),we=async o=>{console.log(o);try{await He(o),V("分配角色成功🌻")}catch(e){console.log(e),X(),w("分配角色失败，请重试")}},Te=o=>{const e=o.userId;if(e==null||e==""){J("请选中需要删除的数据🌻");return}G("您确认需要删除用户名称["+o.userTitle+"]么？").then(async()=>{try{await aa(e),I(),V("删除成功🌻")}catch(_){console.log(_),I(),N("删除失败，请刷新重试🌻")}}).catch(()=>{w("已取消🌻")})},Ne=()=>{if(C.value.length==0){Je("请选择需要删除的数据🌻");return}G("您确认需要进行批量删除么？").then(async()=>{try{console.log("ids",C.value),await la(C.value),I(),V("批量删除成功🌻")}catch(o){console.log(o),N("批量删除失败，请刷新重试🌻"),I()}}).catch(()=>{w("已取消🌻")})};return(o,e)=>{const _=r("el-input"),f=r("el-form-item"),xe=r("el-date-picker"),h=r("el-button"),ee=r("el-form"),g=r("el-col"),Se=r("KoiToolbar"),ae=r("el-row"),c=r("el-table-column"),Ve=r("CircleCloseFilled"),le=r("el-icon"),Ie=r("el-image"),te=r("KoiTag"),Ce=r("el-switch"),oe=r("el-tooltip"),Ue=r("el-table"),De=r("el-pagination"),O=r("el-option"),re=r("el-select"),qe=r("Avatar"),ze=r("KoiUploadImage"),Le=r("KoiDrawer"),Ke=r("el-transfer"),Me=r("KoiDialog"),Pe=r("KoiCard"),Re=K("debounce"),Be=K("throttle"),k=K("auth"),Ee=K("loading");return m(),ne("div",oa,[a(Pe,null,{default:l(()=>[p(a(ee,{inline:!0},{default:l(()=>[a(f,{label:"登录账号",prop:"loginName"},{default:l(()=>[a(_,{placeholder:"请输入登录账号",modelValue:u.value.loginName,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.loginName=t),clearable:"",style:{width:"200px"},onKeyup:$(v,["enter","native"])},null,8,["modelValue"])]),_:1}),a(f,{label:"用户名称",prop:"userName"},{default:l(()=>[a(_,{placeholder:"请输入用户名称",modelValue:u.value.userName,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.userName=t),clearable:"",style:{width:"200px"},onKeyup:$(v,["enter","native"])},null,8,["modelValue"])]),_:1}),a(f,{label:"手机号",prop:"phone"},{default:l(()=>[a(_,{placeholder:"请输入手机号",modelValue:u.value.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.phone=t),clearable:"",style:{width:"200px"},onKeyup:$(v,["enter","native"])},null,8,["modelValue"])]),_:1}),a(f,{label:"登录时间",prop:"loginTime"},{default:l(()=>[a(xe,{modelValue:z.value,"onUpdate:modelValue":e[3]||(e[3]=t=>z.value=t),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),a(f,null,{default:l(()=>[p((m(),b(h,{type:"primary",icon:"search",plain:""},{default:l(()=>e[18]||(e[18]=[y("搜索")])),_:1,__:[18]})),[[Re,de]]),p((m(),b(h,{type:"danger",icon:"refresh",plain:""},{default:l(()=>e[19]||(e[19]=[y("重置")])),_:1,__:[19]})),[[Be,ce]])]),_:1})]),_:1},512),[[se,P.value]]),a(ae,{gutter:10},{default:l(()=>[p((m(),b(g,{span:1.5},{default:l(()=>[a(h,{type:"primary",icon:"plus",plain:"",onClick:e[4]||(e[4]=t=>fe())},{default:l(()=>e[20]||(e[20]=[y("新增")])),_:1,__:[20]})]),_:1})),[[k,["system:role:add"]]]),p((m(),b(g,{span:1.5},{default:l(()=>[a(h,{type:"success",icon:"edit",plain:"",onClick:e[5]||(e[5]=t=>H()),disabled:B.value},{default:l(()=>e[21]||(e[21]=[y("修改")])),_:1,__:[21]},8,["disabled"])]),_:1})),[[k,["system:role:update"]]]),p((m(),b(g,{span:1.5},{default:l(()=>[a(h,{type:"danger",icon:"delete",plain:"",onClick:e[6]||(e[6]=t=>Ne()),disabled:j.value},{default:l(()=>e[22]||(e[22]=[y("删除")])),_:1,__:[22]},8,["disabled"])]),_:1})),[[k,["system:role:delete"]]]),p((m(),b(g,{span:1.5},{default:l(()=>[a(h,{type:"primary",icon:"edit",plain:"",onClick:e[7]||(e[7]=t=>X()),disabled:B.value},{default:l(()=>e[23]||(e[23]=[y("分配角色")])),_:1,__:[23]},8,["disabled"])]),_:1})),[[k,["system:role:update"]]]),p((m(),b(g,{span:1.5},{default:l(()=>[a(h,{type:"warning",icon:"download",plain:""},{default:l(()=>e[24]||(e[24]=[y("导出")])),_:1,__:[24]})]),_:1})),[[k,["system:role:export"]]]),p((m(),b(g,{span:1.5},{default:l(()=>[a(h,{type:"info",icon:"upload",plain:""},{default:l(()=>e[25]||(e[25]=[y("导入")])),_:1,__:[25]})]),_:1})),[[k,["system:role:import"]]]),a(Se,{showSearch:P.value,"onUpdate:showSearch":e[8]||(e[8]=t=>P.value=t),onRefreshTable:v},null,8,["showSearch"])]),_:1}),e[28]||(e[28]=D("br",null,null,-1)),p((m(),b(Ue,{border:"",data:F.value.slice((u.value.pageNo-1)*u.value.pageSize,u.value.pageNo*u.value.pageSize),"empty-text":"暂时没有数据哟🌻",onSelectionChange:ve},{default:l(()=>[a(c,{type:"selection",width:"55",align:"center"}),a(c,{label:"序号",prop:"userId",width:"80px",align:"center",type:"index"}),a(c,{label:"登录账号",prop:"loginName",width:"120px",align:"center","show-overflow-tooltip":!0}),a(c,{label:"头像",prop:"avatar",width:"80px",align:"center"},{default:l(t=>[D("div",ra,[a(Ie,{class:"rounded-full w-36px h-36px","preview-teleported":!0,"preview-src-list":[t.row.avatar],src:t.row.avatar!=null&&t.row.avatar!=""?t.row.avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},{error:l(()=>[a(le,{class:"c-[--el-color-primary]",size:36},{default:l(()=>[a(Ve)]),_:1})]),_:2},1032,["preview-src-list","src"])])]),_:1}),a(c,{label:"用户名称",prop:"userName",width:"120px",align:"center","show-overflow-tooltip":!0}),a(c,{label:"邮箱",prop:"email",width:"220px",align:"center","show-overflow-tooltip":!0}),a(c,{label:"手机号",prop:"phone",width:"150px",align:"center","show-overflow-tooltip":!0}),a(c,{label:"用户类型",prop:"userType",width:"100px",align:"center"},{default:l(t=>[a(te,{tagOptions:R.value,value:t.row.userType},null,8,["tagOptions","value"])]),_:1}),a(c,{label:"用户性别",prop:"sex",width:"100px",align:"center"},{default:l(t=>[a(te,{tagOptions:Q.value,value:t.row.sex},null,8,["tagOptions","value"])]),_:1}),a(c,{label:"用户状态",prop:"userStatus",width:"100px",align:"center"},{default:l(t=>[a(Ce,{modelValue:t.row.userStatus,"onUpdate:modelValue":L=>t.row.userStatus=L,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:L=>ke(t.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(c,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),a(c,{label:"备注",prop:"remark",width:"200px",align:"center","show-overflow-tooltip":!0}),p((m(),b(c,{label:"操作",align:"center",width:"150",fixed:"right"},{default:l(({row:t})=>[a(oe,{content:"修改🌻",placement:"top"},{default:l(()=>[p(a(h,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:L=>H(t)},null,8,["onClick"]),[[k,["system:role:update"]]])]),_:2},1024),a(oe,{content:"删除🌻",placement:"top"},{default:l(()=>[p(a(h,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:L=>Te(t)},null,8,["onClick"]),[[k,["system:role:delete"]]])]),_:2},1024)]),_:1})),[[k,["system:role:update","system:role:delete"]]])]),_:1},8,["data"])),[[Ee,M.value]]),e[29]||(e[29]=D("br",null,null,-1)),p(a(De,{background:"","current-page":u.value.pageNo,"onUpdate:currentPage":e[9]||(e[9]=t=>u.value.pageNo=t),"page-size":u.value.pageSize,"onUpdate:pageSize":e[10]||(e[10]=t=>u.value.pageSize=t),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:q.value,onSizeChange:v,onCurrentChange:v},null,8,["current-page","page-size","total"]),[[se,q.value>0]]),a(Le,{ref_key:"koiDrawerRef",ref:S,title:E.value,onKoiConfirm:he,onKoiCancel:ye,loading:T.value},{content:l(()=>[a(ee,{ref_key:"formRef",ref:Y,rules:_e,model:d(n),"label-width":"80px","status-icon":""},{default:l(()=>[a(ae,null,{default:l(()=>[a(g,{xs:{span:24},sm:{span:24}},{default:l(()=>[a(f,{label:"用户名称",prop:"userTitle"},{default:l(()=>[a(_,{modelValue:d(n).userTitle,"onUpdate:modelValue":e[11]||(e[11]=t=>d(n).userTitle=t),placeholder:"请输入用户名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:l(()=>[a(f,{label:"用户类型",prop:"userType"},{default:l(()=>[a(re,{placeholder:"请选择用户类型",modelValue:d(n).userType,"onUpdate:modelValue":e[12]||(e[12]=t=>d(n).userType=t),clearable:""},{default:l(()=>[(m(!0),ne(Oe,null,$e(R.value,t=>(m(),b(O,{key:t.dictValue,label:t.dictLabel,value:t.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:l(()=>[a(f,{label:"用户状态",prop:"userStatus"},{default:l(()=>[a(re,{modelValue:d(n).userStatus,"onUpdate:modelValue":e[13]||(e[13]=t=>d(n).userStatus=t),placeholder:"请选择用户状态",clearable:""},{default:l(()=>[a(O,{label:"启用",value:"0"}),a(O,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:l(()=>[a(f,{label:"用户头像",prop:"avatar"},{default:l(()=>[a(ze,{imageUrl:d(n).avatar,"onUpdate:imageUrl":e[14]||(e[14]=t=>d(n).avatar=t)},{content:l(()=>[a(le,null,{default:l(()=>[a(qe)]),_:1}),e[26]||(e[26]=D("span",null,"请上传头像",-1))]),tip:l(()=>e[27]||(e[27]=[y("图片最大为 3M")])),_:1},8,["imageUrl"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:l(()=>[a(f,{label:"手机号",prop:"phone"},{default:l(()=>[a(_,{modelValue:d(n).phone,"onUpdate:modelValue":e[15]||(e[15]=t=>d(n).phone=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:l(()=>[a(f,{label:"用户备注",prop:"remark"},{default:l(()=>[a(_,{modelValue:d(n).remark,"onUpdate:modelValue":e[16]||(e[16]=t=>d(n).remark=t),rows:5,type:"textarea",placeholder:"请输入用户备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),y(" "+Ge(d(n)),1)]),_:1},8,["title","loading"]),a(Me,{ref_key:"koiDialogRef",ref:W,title:"分配角色",height:450,loading:T.value,footerHidden:!0},{content:l(()=>[D("div",na,[a(Ke,{props:{key:"value",label:"label"},titles:["角色列表","拥有角色"],"target-order":"original",filterable:"","filter-placeholder":"关键字搜索",format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},modelValue:A.value,"onUpdate:modelValue":e[17]||(e[17]=t=>A.value=t),data:Z.value,onChange:we},null,8,["modelValue","data"])])]),_:1},8,["loading"])]),_:1,__:[28,29]})])}}}),da=Qe(ua,[["__scopeId","data-v-9f886c79"]]);export{da as default};
