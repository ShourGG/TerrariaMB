import{af as k,d as K,r as p,o as ce,g as n,S as T,e as he,i as v,f as e,w as t,Q as h,j as z,D as A,y as N,k as g,R as Y,m as _e,t as w,z as u,W as ve,V as E,T as B,U as M,I as C,X as we,ah as be}from"./index-_hVn5I9W.js";const fe=c=>k.get("/koi/sysOperLog/listPage",c),Ne=c=>k.post("/koi/sysOperLog/deleteById/"+c),ye=c=>k.post("/koi/sysOperLog/batchDelete",c),Se=c=>k.get("/koi/sysOperLog/getDetailById/"+c),Ie={class:"koi-flex"},Te=K({name:"operlogPage"}),ke=K({...Te,setup(c){const j=p(!1),P=p(!0),x=p([{operId:"1719245754125537281",operName:"æ—¥å¿—åˆ†é¡µæŸ¥è¯¢",operType:"EXPORT",methodName:"listPage",requestMethod:"",systemType:"PHONE",operMan:"null/è¶…çº§ç®¡ç†å‘˜",operUrl:"",operIp:"",operLocation:"",operParam:'{"pageNo":1,"pageSize":10,"loginName":null,"ipAddress":null,"loginStatus":null,"beginTime":null,"endTime":null}',jsonResult:'{"records":[{"loginId":1631503277759787010,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"99.88","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"loginId":1631504522339807234,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"127.0.0.1","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"loginId":1631521087655362562,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"127.0.0.1","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"loginId":1631545199358406657,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"127.0.0.1","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"lo',operStatus:"0",errorMsg:"",operTime:"2023-10-31 14:51:44",costTime:"7/ms"},{operId:"1719266711737237506",operName:"æ—¥å¿—åˆ†é¡µæŸ¥è¯¢",operType:"EXPORT",methodName:"listPage",requestMethod:"GET",systemType:"PHONE",operMan:"YU-ADMIN/è¶…çº§ç®¡ç†å‘˜",operUrl:"/koi/sysLoginLog/listPage",operIp:"127.0.0.1",operLocation:"å†…ç½‘IPï¼Œæ— æ³•èŽ·å–ä½ç½®",operParam:'{"pageNo":1,"pageSize":10,"loginName":null,"ipAddress":null,"loginStatus":null,"beginTime":null,"endTime":null}',jsonResult:'{"records":[{"loginId":1631503277759787010,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"99.88","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"loginId":1631504522339807234,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"127.0.0.1","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"loginId":1631521087655362562,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"127.0.0.1","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"loginId":1631545199358406657,"loginName":"YU-ADMINðŸŒ»","deviceName":"Unknown","ipAddress":"127.0.0.1","loginAddress":"æ²³å—çœ éƒ‘å·žå¸‚","browser":"iOS 11 (iPhone)","os":"Chrome Mobile","loginStatus":"0","message":"ç™»å½•æˆåŠŸ","loginTime":"2023-08-25 19:13:30"},{"lo',operStatus:"1",errorMsg:"",operTime:"2023-10-31 16:15:01",costTime:"112/ms"},{operId:"1719266961520615426",operName:"æ—¥å¿—åˆ†é¡µæŸ¥è¯¢",operType:"EXPORT",methodName:"listPage",requestMethod:"GET",systemType:"PHONE",operMan:"YU-ADMIN/è¶…çº§ç®¡ç†å‘˜",operUrl:"/koi/sysLoginLog/listPage",operIp:"127.0.0.1",operLocation:"å†…ç½‘IPï¼Œæ— æ³•èŽ·å–ä½ç½®",operParam:'{"pageNo":1,"pageSize":10,"loginName":null,"ipAddress":null,"loginStatus":null,"beginTime":null,"endTime":null}',jsonResult:"",operStatus:"1",errorMsg:"",operTime:"2023-10-31 16:16:01",costTime:"111/ms"}]),r=p({pageNo:1,pageSize:10,operName:"",operIp:"",operMan:""}),y=p(0),S=p(),H=()=>{S.value=[],r.value={pageNo:1,pageSize:10,operName:"",operIp:"",operMan:""}},q=()=>{console.log("æœç´¢"),r.value.pageNo=1,m()},X=()=>{console.log("é‡ç½®æœç´¢"),H(),m()},m=async()=>{y.value=200},I=async()=>{try{const l=await fe(be(r.value,S.value));console.log("æ“ä½œæ—¥å¿—æ•°æ®è¡¨æ ¼æ•°æ®->",l.data),x.value=l.data.records,y.value=l.data.total}catch(l){console.log(l),M("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}};ce(()=>{m()});const D=p([]),$=p(!0),O=p(!0),G=l=>{D.value=l.map(o=>o.operId),$.value=l.length!=1,O.value=!l.length},W=l=>{const o=l.operId;(o==null||o=="")&&ve("è¯·é€‰ä¸­éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»"),E("æ‚¨ç¡®è®¤éœ€è¦åˆ é™¤æ“ä½œåç§°["+l.operName+"]ä¹ˆï¼Ÿ").then(async()=>{try{await Ne(o),I(),B("åˆ é™¤æˆåŠŸðŸŒ»")}catch(d){console.log(d),I(),M("åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}}).catch(()=>{C("å·²å–æ¶ˆðŸŒ»")})},F=()=>{if(D.value.length==0){we("è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}E("æ‚¨ç¡®è®¤éœ€è¦è¿›è¡Œæ‰¹é‡åˆ é™¤ä¹ˆï¼Ÿ").then(async()=>{try{await ye(D.value),I(),B("æ‰¹é‡åˆ é™¤æˆåŠŸðŸŒ»")}catch(l){console.log(l),M("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»"),I()}}).catch(()=>{C("å·²å–æ¶ˆðŸŒ»")})},Q=async l=>{const o=l.operId;o||C("è¯·ä¼ é€’éœ€è¦æŸ¥è¯¢çš„æ¡ä»¶ðŸŒ»"),J(),L.value="æè¿°åˆ—è¡¨";try{const d=await Se(o);console.log("æ“ä½œæ—¥å¿—æ•°æ®è¡¨æ ¼æ•°æ®->",d.data),s.value=d.data}catch(d){console.log(d),M("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}V.value.koiOpen()},V=p(),L=p("æè¿°åˆ—è¡¨");let s=p({methodName:"",operParam:"",jsonResult:"",operStatus:"",errorMsg:"",costTime:""});const J=()=>{s.value={methodName:"",operParam:"",jsonResult:"",operStatus:"",errorMsg:"",costTime:""}};return(l,o)=>{const d=n("el-input"),b=n("el-form-item"),Z=n("el-date-picker"),f=n("el-button"),ee=n("el-form"),oe=n("el-col"),te=n("KoiToolbar"),le=n("el-row"),i=n("el-table-column"),R=n("el-tooltip"),ae=n("el-table"),ne=n("el-pagination"),_=n("el-descriptions-item"),re=n("el-tag"),se=n("el-descriptions"),ie=n("KoiDialog"),pe=n("KoiCard"),de=T("debounce"),ue=T("throttle"),U=T("auth"),me=T("loading");return v(),he("div",Ie,[e(pe,null,{default:t(()=>[h(e(ee,{inline:!0},{default:t(()=>[e(b,{label:"æ“ä½œåç§°",prop:"operName"},{default:t(()=>[e(d,{placeholder:"è¯·è¾“å…¥æ“ä½œåç§°",modelValue:r.value.operName,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value.operName=a),style:{width:"200px"},clearable:"",onKeyup:A(m,["enter","native"])},null,8,["modelValue"])]),_:1}),e(b,{label:"IPåœ°å€",prop:"operIp"},{default:t(()=>[e(d,{placeholder:"è¯·è¾“å…¥IPåœ°å€",modelValue:r.value.operIp,"onUpdate:modelValue":o[1]||(o[1]=a=>r.value.operIp=a),style:{width:"200px"},clearable:"",onKeyup:A(m,["enter","native"])},null,8,["modelValue"])]),_:1}),e(b,{label:"æ“ä½œäººå‘˜",prop:"operMan"},{default:t(()=>[e(d,{placeholder:"è¯·è¾“å…¥æ“ä½œäººå‘˜åå­—",modelValue:r.value.operMan,"onUpdate:modelValue":o[2]||(o[2]=a=>r.value.operMan=a),style:{width:"200px"},clearable:"",onKeyup:A(m,["enter","native"])},null,8,["modelValue"])]),_:1}),e(b,{label:"è®¿é—®æ—¶é—´",prop:"loginTime"},{default:t(()=>[e(Z,{modelValue:S.value,"onUpdate:modelValue":o[3]||(o[3]=a=>S.value=a),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":"å¼€å§‹æ—¥æœŸ","range-separator":"è‡³","end-placeholder":"ç»“æŸæ—¥æœŸ","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),e(b,null,{default:t(()=>[h((v(),N(f,{type:"primary",icon:"search",plain:""},{default:t(()=>o[8]||(o[8]=[g("æœç´¢")])),_:1,__:[8]})),[[de,q]]),h((v(),N(f,{type:"danger",icon:"refresh",plain:""},{default:t(()=>o[9]||(o[9]=[g("é‡ç½®")])),_:1,__:[9]})),[[ue,X]])]),_:1})]),_:1},512),[[Y,P.value]]),e(le,{gutter:10},{default:t(()=>[h((v(),N(oe,{span:1.5},{default:t(()=>[e(f,{type:"danger",icon:"delete",plain:"",onClick:o[4]||(o[4]=a=>F()),disabled:O.value},{default:t(()=>o[10]||(o[10]=[g("åˆ é™¤")])),_:1,__:[10]},8,["disabled"])]),_:1})),[[U,["system:role:delete"]]]),e(te,{showSearch:P.value,"onUpdate:showSearch":o[5]||(o[5]=a=>P.value=a),onRefreshTable:m},null,8,["showSearch"])]),_:1}),o[11]||(o[11]=z("br",null,null,-1)),h((v(),N(ae,{border:"",data:x.value,"empty-text":"æš‚æ—¶æ²¡æœ‰æ•°æ®å“ŸðŸŒ»",onSelectionChange:G},{default:t(()=>[e(i,{type:"selection",width:"55",align:"center"}),e(i,{label:"åºå·",prop:"operId",width:"70px",align:"center",type:"index"}),e(i,{label:"æ“ä½œåç§°",prop:"operName",width:"180px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"æ“ä½œç±»åž‹",prop:"operType",width:"120px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"ç³»ç»Ÿç±»åž‹",prop:"systemType",width:"120px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"è¯·æ±‚æ–¹å¼",prop:"requestMethod",width:"100px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"æ“ä½œäººå‘˜[ç™»å½•å/ç”¨æˆ·å]",prop:"operMan",width:"200px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"è¯·æ±‚URL",prop:"operUrl",width:"200px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"æ“ä½œIP",prop:"operIp",width:"200px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"æ“ä½œåœ°ç‚¹",prop:"operLocation",width:"180px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"æ“ä½œæ—¶é—´",prop:"operTime",width:"180px",align:"center","show-overflow-tooltip":!0}),e(i,{label:"æ“ä½œ",align:"center",width:"120",fixed:"right"},{default:t(({row:a})=>[e(R,{content:"åˆ é™¤ðŸŒ»",placement:"top"},{default:t(()=>[h(e(f,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:ge=>W(a)},null,8,["onClick"]),[[U,["system:role:delete"]]])]),_:2},1024),e(R,{content:"æŸ¥çœ‹ðŸŒ»",placement:"top"},{default:t(()=>[h(e(f,{type:"primary",icon:"View",circle:"",plain:"",onClick:ge=>Q(a)},null,8,["onClick"]),[[U,["system:role:list"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[me,j.value]]),o[12]||(o[12]=z("br",null,null,-1)),h(e(ne,{background:"","current-page":r.value.pageNo,"onUpdate:currentPage":o[6]||(o[6]=a=>r.value.pageNo=a),"page-size":r.value.pageSize,"onUpdate:pageSize":o[7]||(o[7]=a=>r.value.pageSize=a),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:m,onCurrentChange:m},null,8,["current-page","page-size","total"]),[[Y,y.value>0]]),e(ie,{ref_key:"koiDialogRef",ref:V,title:L.value,top:"6vh",height:660,width:800,footerHidden:!0},{content:t(()=>[e(se,{direction:"vertical",column:3,border:""},{default:t(()=>[e(_,{label:"æ–¹æ³•åç§°"},{default:t(()=>[g(w(u(s).methodName),1)]),_:1}),e(_,{label:"æ¶ˆè€—æ—¶é—´[æ¯«ç§’]"},{default:t(()=>[g(w(u(s).costTime),1)]),_:1}),e(_,{label:"æ“ä½œçŠ¶æ€"},{default:t(()=>[e(re,{type:u(s).operStatus=="0"?"":u(s).operStatus=="1"?"danger":"warning"},{default:t(()=>[g(w(u(s).operStatus=="0"?"æ“ä½œæˆåŠŸ":u(s).operStatus=="1"?"æ“ä½œå¤±è´¥":"æœªçŸ¥çŠ¶æ€"),1)]),_:1},8,["type"])]),_:1}),u(s).operStatus=="1"?(v(),N(_,{key:0,label:"å¼‚å¸¸ä¿¡æ¯",span:3},{default:t(()=>[g(w(u(s).costTime),1)]),_:1})):_e("",!0),e(_,{label:"è¯·æ±‚å‚æ•°",span:3},{default:t(()=>[g(w(u(s).operParam),1)]),_:1}),e(_,{label:"è¿”å›žæ•°æ®",span:3},{default:t(()=>[g(w(u(s).jsonResult),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1,__:[11,12]})])}}});export{ke as default};
