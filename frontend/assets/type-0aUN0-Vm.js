import{af as T,d as ee,r,o as we,a as Te,g as i,S as z,e as xe,i as f,f as t,w as l,Q as u,j as E,D as L,y as b,k,R as G,t as J,z as m,H as Z,I as D,T as I,U as w,V as A,W as q,X as Ne}from"./index-_hVn5I9W.js";const Ve=s=>T.get("/koi/sysDictType/listPage",s),Ce=s=>T.get("/koi/sysDictType/getById/"+s),De=s=>T.post("/koi/sysDictType/update",s),Ie=s=>T.post("/koi/sysDictType/add",s),Ue=s=>T.post("/koi/sysDictType/deleteById/"+s),Be=s=>T.post("/koi/sysDictType/batchDelete",s),Ke=(s,M)=>T.post("/koi/sysDictType/updateStatus/"+s+"/"+M),ze={class:"koi-flex"},Me=ee({name:"dictTypePage"}),Pe=ee({...Me,setup(s){const M=r(!1),R=r(!0),Q=r([{dictId:1,dictName:"系统开关🌻",dictType:"sys_common_status",dictStatus:"0",remark:"系统开关列表",createTime:"2023-08-08 23:00:00",updateTime:"2023-08-08 23:00:00",updateBy:"YU-ADMIN🌻"},{dictId:2,dictName:"用户性别🌻",dictType:"sys_user_sex",dictStatus:"0",remark:"用户性别列表",createTime:"2023-08-08 23:00:00",updateTime:"2023-08-08 23:00:00",updateBy:"YU-ADMIN🌻"},{dictId:3,dictName:"菜单状态🌻",dictType:"sys-menu-status",dictStatus:"1",remark:"菜单状态列表",createTime:"2023-08-08 23:00:00",updateTime:"2023-08-08 23:00:00",updateBy:"YU-ADMIN🌻"}]),d=r({pageNo:1,pageSize:10,dictName:"",dictStatus:"",dictType:""}),U=r(0),te=()=>{d.value={pageNo:1,pageSize:10,dictName:"",dictStatus:"",dictType:""}},le=()=>{console.log("搜索"),d.value.pageNo=1,c()},ae=()=>{console.log("重置搜索"),te(),c()},c=async()=>{U.value=400},N=async()=>{try{const a=await Ve(d.value);console.log("字典数据表格数据->",a.data),Q.value=a.data.records,U.value=a.data.total}catch(a){console.log(a),w("数据查询失败，请刷新重试🌻")}};we(()=>{c()});const V=r([]),Y=r(!0),j=r(!0),oe=a=>{V.value=a.map(e=>e.dictId),Y.value=a.length!=1,j.value=!a.length},ne=()=>{C(),P.value="字典添加",n.value.dictStatus="0",x.value.koiOpen(),Z("添加🌻")},ie=async a=>{if(console.log("回显数据ID",a),a==null||a==""){q("请选择需要修改的数据🌻");return}try{const e=await Ce(a);console.log(e.data),n.value=e.data}catch(e){w("数据获取失败，请刷新重试🌻"),console.log(e)}},O=async a=>{C(),P.value="字典修改";const e=a?a.dictId:V.value[0];(e==null||e=="")&&D("请选中需要修改的数据🌻"),console.log(e),ie(e),x.value.koiOpen(),Z("修改🌻")},x=r(),P=r("字典类型管理"),$=r();let n=r({dictId:null,dictType:null,dictName:null,dictStatus:null,remark:null});const C=()=>{n.value={dictId:null,dictType:null,dictName:null,dictStatus:null,remark:null}},se=Te({dictName:[{required:!0,message:"请输入字典名字",trigger:"blur"}],dictType:[{required:!0,message:"请输入字典类型",trigger:"blur"}],dictStatus:[{required:!0,message:"请输入选择字典状态",trigger:"blur"}]}),h=r(!1),de=()=>{$.value&&(h.value=!0,$.value.validate(async a=>{if(a)if(console.log("表单ID",n.value.dictId),n.value.dictId!=null&&n.value.dictId!="")try{await De(n.value),I("修改成功🌻"),h.value=!1,x.value.koiQuickClose(),C(),c()}catch(e){console.log(e),h.value=!1,w("修改失败，请刷新重试🌻")}else try{await Ie(n.value),I("添加成功🌻"),h.value=!1,x.value.koiQuickClose(),C(),c()}catch(e){console.log(e),h.value=!1,w("添加失败，请刷新重试🌻")}else D("验证失败，请检查填写内容🌻"),h.value=!1}))},re=()=>{x.value.koiClose()},ue=a=>{let e=a.dictStatus==="0"?"启用":"停用";A("确认要["+e+"]-["+a.dictName+"]吗？").then(async()=>{if(C(),!a.dictId||!a.dictStatus){q("请选择需要修改的数据🌻");return}try{await Ke(a.dictId,a.dictStatus),I("修改成功🌻")}catch(y){console.log(y),N(),w("修改失败，请刷新重试🌻")}}).catch(()=>{D("已取消🌻")})},ce=a=>{const e=a.dictId;if(e==null||e==""){q("请选中需要删除的数据🌻");return}A("您确认需要删除字典名称["+a.dictName+"]么？").then(async()=>{try{await Ue(e),N(),I("删除成功🌻")}catch(y){console.log(y),N(),w("删除失败，请刷新重试🌻")}}).catch(()=>{D("已取消🌻")})},pe=()=>{if(V.value.length==0){Ne("请选择需要删除的数据🌻");return}A("您确认需要进行批量删除么？").then(async()=>{try{console.log("ids",V.value),await Be(V.value),N(),I("批量删除成功🌻")}catch(a){console.log(a),w("批量删除失败，请刷新重试🌻"),N()}}).catch(()=>{D("已取消🌻")})};return(a,e)=>{const y=i("el-input"),_=i("el-form-item"),B=i("el-option"),W=i("el-select"),g=i("el-button"),F=i("el-form"),v=i("el-col"),me=i("KoiToolbar"),H=i("el-row"),p=i("el-table-column"),ye=i("RouterLink"),ge=i("el-switch"),X=i("el-tooltip"),ve=i("el-table"),fe=i("el-pagination"),_e=i("KoiDrawer"),be=i("KoiCard"),ke=z("debounce"),he=z("throttle"),S=z("auth"),Se=z("loading");return f(),xe("div",ze,[t(be,null,{default:l(()=>[u(t(F,{inline:!0},{default:l(()=>[t(_,{label:"字典名称",prop:"dictName"},{default:l(()=>[t(y,{placeholder:"请输入字典名称",modelValue:d.value.dictName,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value.dictName=o),clearable:"",style:{width:"240px"},onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(_,{label:"字典编号",prop:"dictType"},{default:l(()=>[t(y,{placeholder:"请输入字典编号",modelValue:d.value.dictType,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value.dictType=o),clearable:"",style:{width:"240px"},onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(_,{label:"字典状态",prop:"dictStatus"},{default:l(()=>[t(W,{placeholder:"请选择字典状态",modelValue:d.value.dictStatus,"onUpdate:modelValue":e[2]||(e[2]=o=>d.value.dictStatus=o),clearable:"",style:{width:"240px"},onKeyup:L(c,["enter","native"])},{default:l(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:l(()=>[u((f(),b(g,{type:"primary",icon:"search",plain:""},{default:l(()=>e[13]||(e[13]=[k("搜索")])),_:1,__:[13]})),[[ke,le]]),u((f(),b(g,{type:"danger",icon:"refresh",plain:""},{default:l(()=>e[14]||(e[14]=[k("重置")])),_:1,__:[14]})),[[he,ae]])]),_:1})]),_:1},512),[[G,R.value]]),t(H,{gutter:10},{default:l(()=>[u((f(),b(v,{span:1.5},{default:l(()=>[t(g,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=o=>ne())},{default:l(()=>e[15]||(e[15]=[k("新增")])),_:1,__:[15]})]),_:1})),[[S,["system:role:add"]]]),u((f(),b(v,{span:1.5},{default:l(()=>[t(g,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=o=>O()),disabled:Y.value},{default:l(()=>e[16]||(e[16]=[k("修改")])),_:1,__:[16]},8,["disabled"])]),_:1})),[[S,["system:role:update"]]]),u((f(),b(v,{span:1.5},{default:l(()=>[t(g,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=o=>pe()),disabled:j.value},{default:l(()=>e[17]||(e[17]=[k("删除")])),_:1,__:[17]},8,["disabled"])]),_:1})),[[S,["system:role:delete"]]]),u((f(),b(v,{span:1.5},{default:l(()=>[t(g,{type:"warning",icon:"download",plain:""},{default:l(()=>e[18]||(e[18]=[k("导出")])),_:1,__:[18]})]),_:1})),[[S,["system:role:export"]]]),u((f(),b(v,{span:1.5},{default:l(()=>[t(g,{type:"danger",icon:"Refresh",plain:""},{default:l(()=>e[19]||(e[19]=[k("刷新缓存")])),_:1,__:[19]})]),_:1})),[[S,["system:role:update"]]]),t(me,{showSearch:R.value,"onUpdate:showSearch":e[6]||(e[6]=o=>R.value=o),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[20]||(e[20]=E("br",null,null,-1)),u((f(),b(ve,{border:"",data:Q.value,"empty-text":"暂时没有数据哟🌻",onSelectionChange:oe},{default:l(()=>[t(p,{type:"selection",width:"55",align:"center"}),t(p,{label:"序号",prop:"dictId",width:"120px",align:"center",type:"index"}),t(p,{label:"字典名称",prop:"dictName",width:"120px",align:"center"}),t(p,{label:"字典类型",prop:"dictType",width:"180px",align:"center"},{default:l(o=>[t(ye,{to:`/system/dict/data/${o.row.dictType}`},{default:l(()=>[E("span",null,J(o.row.dictType),1)]),_:2},1032,["to"])]),_:1}),t(p,{label:"字典状态",prop:"dictStatus",width:"100px",align:"center"},{default:l(o=>[t(ge,{modelValue:o.row.dictStatus,"onUpdate:modelValue":K=>o.row.dictStatus=K,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:K=>ue(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(p,{label:"字典备注",prop:"remark",width:"260px","show-overflow-tooltip":!0,align:"center"}),t(p,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),t(p,{label:"修改时间",prop:"updateTime",width:"180px",align:"center"}),t(p,{label:"修改人",prop:"updateBy",width:"180px",align:"center"}),t(p,{label:"操作",align:"center",width:"120",fixed:"right"},{default:l(({row:o})=>[t(X,{content:"修改🌻",placement:"top"},{default:l(()=>[u(t(g,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:K=>O(o)},null,8,["onClick"]),[[S,["system:role:update"]]])]),_:2},1024),t(X,{content:"删除🌻",placement:"top"},{default:l(()=>[u(t(g,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:K=>ce(o)},null,8,["onClick"]),[[S,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Se,M.value]]),e[21]||(e[21]=E("br",null,null,-1)),u(t(fe,{background:"","current-page":d.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=o=>d.value.pageNo=o),"page-size":d.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=o=>d.value.pageSize=o),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[G,U.value>0]]),t(_e,{ref_key:"koiDrawerRef",ref:x,title:P.value,onKoiConfirm:de,onKoiCancel:re,loading:h.value},{content:l(()=>[t(F,{ref_key:"formRef",ref:$,rules:se,model:m(n),"label-width":"80px","status-icon":""},{default:l(()=>[t(H,null,{default:l(()=>[t(v,{xs:{span:24},sm:{span:24}},{default:l(()=>[t(_,{label:"字典名称",prop:"dictName"},{default:l(()=>[t(y,{modelValue:m(n).dictName,"onUpdate:modelValue":e[9]||(e[9]=o=>m(n).dictName=o),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{xs:{span:24},sm:{span:24}},{default:l(()=>[t(_,{label:"字典类型",prop:"dictType"},{default:l(()=>[t(y,{modelValue:m(n).dictType,"onUpdate:modelValue":e[10]||(e[10]=o=>m(n).dictType=o),placeholder:"请输入字典类型",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{xs:{span:24},sm:{span:24}},{default:l(()=>[t(_,{label:"字典状态",prop:"dictStatus"},{default:l(()=>[t(W,{modelValue:m(n).dictStatus,"onUpdate:modelValue":e[11]||(e[11]=o=>m(n).dictStatus=o),placeholder:"请选择字典状态",clearable:""},{default:l(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(v,{xs:{span:24},sm:{span:24}},{default:l(()=>[t(_,{label:"字典备注",prop:"remark"},{default:l(()=>[t(y,{modelValue:m(n).remark,"onUpdate:modelValue":e[12]||(e[12]=o=>m(n).remark=o),rows:5,type:"textarea",placeholder:"请输入字典备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),k(" "+J(m(n)),1)]),_:1},8,["title","loading"])]),_:1,__:[20,21]})])}}});export{Pe as default};
