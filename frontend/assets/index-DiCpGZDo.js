import{af as N,d as Z,r as u,o as we,a as Ne,g as n,S as A,e as Se,i as y,f as t,w as o,Q as m,j as G,D as R,y as h,k,R as X,z as i,t as Ce,H as J,I as V,T as D,U as w,V as E,W as O,X as Ie}from"./index-_hVn5I9W.js";const xe=r=>N.get("/koi/sysPost/listPage",r),Ve=r=>N.get("/koi/sysPost/getById/"+r),De=r=>N.post("/koi/sysPost/update",r),Ue=r=>N.post("/koi/sysPost/add",r),Me=r=>N.post("/koi/sysPost/deleteById/"+r),Be=r=>N.post("/koi/sysPost/batchDelete",r),Te=(r,Y)=>N.post("/koi/sysPost/updateStatus/"+r+"/"+Y),Ae={class:"koi-flex"},Ye=Z({name:"postPage"}),Ke=Z({...Ye,setup(r){const Y=u(!1),P=u(!0),$=u([{postId:1,postCode:"CEO",postName:"è‘£äº‹é•¿ğŸŒ»",sorted:1,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:2,postCode:"PM",postName:"é¡¹ç›®ç»ç†ğŸŒ»",sorted:2,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:3,postCode:"HR",postName:"äººåŠ›èµ„æºğŸŒ»",sorted:3,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:4,postCode:"NORMAL",postName:"æ™®é€šå‘˜å·¥ğŸŒ»",sorted:4,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:5,postCode:"TECHNOLOGY",postName:"æŠ€æœ¯å²—ä½ğŸŒ»",sorted:4,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"}]),p=u({pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}),U=u(0),ee=()=>{p.value={pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}},te=()=>{console.log("æœç´¢"),p.value.pageNo=1,c()},oe=()=>{console.log("é‡ç½®æœç´¢"),ee(),c()},c=async()=>{U.value=200},I=async()=>{try{const l=await xe(p.value);console.log("å²—ä½æ•°æ®è¡¨æ ¼æ•°æ®->",l.data),$.value=l.data.records,U.value=l.data.total}catch(l){console.log(l),w("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}};we(()=>{c()});const M=u([]),L=u(!0),q=u(!0),le=l=>{M.value=l.map(e=>e.postId),L.value=l.length!=1,q.value=!l.length},ae=()=>{x(),K.value="å²—ä½æ·»åŠ ",s.value.postStatus="0",S.value.koiOpen(),J("æ·»åŠ ğŸŒ»")},se=async l=>{if(console.log("å›æ˜¾æ•°æ®ID",l),l==null||l==""){O("è¯·é€‰æ‹©éœ€è¦ä¿®æ”¹çš„æ•°æ®ğŸŒ»");return}try{const e=await Ve(l);console.log(e.data),s.value=e.data}catch(e){w("æ•°æ®è·å–å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»"),console.log(e)}},H=async l=>{x(),K.value="å²—ä½ä¿®æ”¹";const e=l?l.postId:M.value[0];(e==null||e=="")&&V("è¯·é€‰ä¸­éœ€è¦ä¿®æ”¹çš„æ•°æ®ğŸŒ»"),console.log(e),se(e),S.value.koiOpen(),J("ä¿®æ”¹ğŸŒ»")},S=u(),K=u("å²—ä½ç±»å‹ç®¡ç†"),z=u();let s=u({postName:null,postCode:null,postStatus:null,sorted:1,remark:null});const x=()=>{s.value={postName:null,postCode:null,postStatus:null,sorted:1,remark:null}},ne=Ne({postName:[{required:!0,message:"è¯·è¾“å…¥å²—ä½åå­—",trigger:"blur"}],postCode:[{required:!0,message:"è¯·è¾“å…¥å²—ä½ç¼–ç ",trigger:"blur"}],postStatus:[{required:!0,message:"è¯·è¾“å…¥é€‰æ‹©å²—ä½çŠ¶æ€",trigger:"blur"}]}),b=u(!1),re=()=>{z.value&&(b.value=!0,z.value.validate(async l=>{if(l)if(console.log("è¡¨å•ID",s.value.postId),s.value.postId!=null&&s.value.postId!="")try{await De(s.value),D("ä¿®æ”¹æˆåŠŸğŸŒ»"),b.value=!1,S.value.koiQuickClose(),x(),c()}catch(e){console.log(e),b.value=!1,w("ä¿®æ”¹å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}else try{await Ue(s.value),D("æ·»åŠ æˆåŠŸğŸŒ»"),b.value=!1,S.value.koiQuickClose(),x(),c()}catch(e){console.log(e),b.value=!1,w("æ·»åŠ å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}else V("éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¡«å†™å†…å®¹ğŸŒ»"),b.value=!1}))},pe=()=>{S.value.koiClose()},ue=l=>{let e=l.postStatus==="0"?"å¯ç”¨":"åœç”¨";E("ç¡®è®¤è¦["+e+"]-["+l.postName+"]å—ï¼Ÿ").then(async()=>{if(x(),!l.postId||!l.postStatus){O("è¯·é€‰æ‹©éœ€è¦ä¿®æ”¹çš„æ•°æ®ğŸŒ»");return}try{await Te(l.postId,l.postStatus),D("ä¿®æ”¹æˆåŠŸğŸŒ»")}catch(g){console.log(g),I(),w("ä¿®æ”¹å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}}).catch(()=>{V("å·²å–æ¶ˆğŸŒ»")})},de=l=>{const e=l.postId;if(e==null||e==""){O("è¯·é€‰ä¸­éœ€è¦åˆ é™¤çš„æ•°æ®ğŸŒ»");return}E("æ‚¨ç¡®è®¤éœ€è¦åˆ é™¤å²—ä½åç§°["+l.postName+"]ä¹ˆï¼Ÿ").then(async()=>{try{await Me(e),I(),D("åˆ é™¤æˆåŠŸğŸŒ»")}catch(g){console.log(g),I(),w("åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}}).catch(()=>{V("å·²å–æ¶ˆğŸŒ»")})},ie=()=>{if(M.value.length==0){Ie("è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„æ•°æ®ğŸŒ»");return}E("æ‚¨ç¡®è®¤éœ€è¦è¿›è¡Œæ‰¹é‡åˆ é™¤ä¹ˆï¼Ÿ").then(async()=>{try{await Be(M.value),I(),D("æ‰¹é‡åˆ é™¤æˆåŠŸğŸŒ»")}catch(l){console.log(l),I(),w("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}}).catch(()=>{V("å·²å–æ¶ˆğŸŒ»")})};return(l,e)=>{const g=n("el-input"),v=n("el-form-item"),B=n("el-option"),Q=n("el-select"),_=n("el-button"),j=n("el-form"),f=n("el-col"),ce=n("KoiToolbar"),W=n("el-row"),d=n("el-table-column"),me=n("el-switch"),F=n("el-tooltip"),ge=n("el-table"),ve=n("el-pagination"),fe=n("el-input-number"),_e=n("KoiDrawer"),ye=n("KoiCard"),be=A("debounce"),he=A("throttle"),C=A("auth"),ke=A("loading");return y(),Se("div",Ae,[t(ye,null,{default:o(()=>[m(t(j,{inline:!0},{default:o(()=>[t(v,{label:"å²—ä½åç§°",prop:"postName"},{default:o(()=>[t(g,{placeholder:"è¯·è¾“å…¥å²—ä½åç§°",modelValue:p.value.postName,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value.postName=a),clearable:"",style:{width:"240px"},onKeyup:R(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"å²—ä½ç¼–ç ",prop:"postCode"},{default:o(()=>[t(g,{placeholder:"è¯·è¾“å…¥å²—ä½ç¼–ç ",modelValue:p.value.postCode,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value.postCode=a),clearable:"",style:{width:"240px"},onKeyup:R(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"å²—ä½çŠ¶æ€",prop:"postStatus"},{default:o(()=>[t(Q,{placeholder:"è¯·é€‰æ‹©å²—ä½çŠ¶æ€",modelValue:p.value.postStatus,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value.postStatus=a),clearable:"",style:{width:"240px"},onKeyup:R(c,["enter","native"])},{default:o(()=>[t(B,{label:"å¯ç”¨",value:"0"}),t(B,{label:"åœç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:o(()=>[m((y(),h(_,{type:"primary",icon:"search",plain:""},{default:o(()=>e[14]||(e[14]=[k("æœç´¢")])),_:1,__:[14]})),[[be,te]]),m((y(),h(_,{type:"danger",icon:"refresh",plain:""},{default:o(()=>e[15]||(e[15]=[k("é‡ç½®")])),_:1,__:[15]})),[[he,oe]])]),_:1})]),_:1},512),[[X,P.value]]),t(W,{gutter:10},{default:o(()=>[m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=a=>ae())},{default:o(()=>e[16]||(e[16]=[k("æ–°å¢")])),_:1,__:[16]})]),_:1})),[[C,["system:role:add"]]]),m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=a=>H()),disabled:L.value},{default:o(()=>e[17]||(e[17]=[k("ä¿®æ”¹")])),_:1,__:[17]},8,["disabled"])]),_:1})),[[C,["system:role:update"]]]),m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=a=>ie()),disabled:q.value},{default:o(()=>e[18]||(e[18]=[k("åˆ é™¤")])),_:1,__:[18]},8,["disabled"])]),_:1})),[[C,["system:role:delete"]]]),m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"warning",icon:"download",plain:""},{default:o(()=>e[19]||(e[19]=[k("å¯¼å‡º")])),_:1,__:[19]})]),_:1})),[[C,["system:role:export"]]]),t(ce,{showSearch:P.value,"onUpdate:showSearch":e[6]||(e[6]=a=>P.value=a),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[20]||(e[20]=G("br",null,null,-1)),m((y(),h(ge,{border:"",data:$.value,"empty-text":"æš‚æ—¶æ²¡æœ‰æ•°æ®å“ŸğŸŒ»",onSelectionChange:le},{default:o(()=>[t(d,{type:"selection",width:"55",align:"center"}),t(d,{label:"åºå·",prop:"postId",width:"80px",align:"center",type:"index"}),t(d,{label:"å²—ä½åç§°",prop:"postName",width:"180px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"å²—ä½ç¼–ç ",prop:"postCode",width:"130px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"å²—ä½çŠ¶æ€",prop:"postStatus",width:"100px",align:"center"},{default:o(a=>[t(me,{modelValue:a.row.postStatus,"onUpdate:modelValue":T=>a.row.postStatus=T,"active-text":"å¯ç”¨","inactive-text":"åœç”¨","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:T=>ue(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(d,{label:"æ˜¾ç¤ºé¡ºåº",prop:"sorted",width:"100px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"å²—ä½å¤‡æ³¨",prop:"remark",width:"220px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"åˆ›å»ºæ—¶é—´",prop:"createTime",width:"180px",align:"center"}),t(d,{label:"åˆ›å»ºäºº",prop:"createBy",width:"150px",align:"center"}),t(d,{label:"ä¿®æ”¹äºº",prop:"updateBy",width:"150px",align:"center"}),t(d,{label:"ä¿®æ”¹æ—¶é—´",prop:"updateTime",width:"180px",align:"center"}),t(d,{label:"æ“ä½œ",align:"center",width:"120",fixed:"right"},{default:o(({row:a})=>[t(F,{content:"ä¿®æ”¹ğŸŒ»",placement:"top"},{default:o(()=>[m(t(_,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:T=>H(a)},null,8,["onClick"]),[[C,["system:role:update"]]])]),_:2},1024),t(F,{content:"åˆ é™¤ğŸŒ»",placement:"top"},{default:o(()=>[m(t(_,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:T=>de(a)},null,8,["onClick"]),[[C,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,Y.value]]),e[21]||(e[21]=G("br",null,null,-1)),m(t(ve,{background:"","current-page":p.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=a=>p.value.pageNo=a),"page-size":p.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=a=>p.value.pageSize=a),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[X,U.value>0]]),t(_e,{ref_key:"koiDrawerRef",ref:S,title:K.value,onKoiConfirm:re,onKoiCancel:pe,loading:b.value},{content:o(()=>[t(j,{ref_key:"formRef",ref:z,rules:ne,model:i(s),"label-width":"80px","status-icon":""},{default:o(()=>[t(W,null,{default:o(()=>[t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"å²—ä½åç§°",prop:"postName"},{default:o(()=>[t(g,{modelValue:i(s).postName,"onUpdate:modelValue":e[9]||(e[9]=a=>i(s).postName=a),placeholder:"è¯·è¾“å…¥å²—ä½åç§°",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"å²—ä½ç¼–ç ",prop:"postCode"},{default:o(()=>[t(g,{modelValue:i(s).postCode,"onUpdate:modelValue":e[10]||(e[10]=a=>i(s).postCode=a),placeholder:"è¯·è¾“å…¥å²—ä½ç¼–ç ",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"å²—ä½çŠ¶æ€",prop:"postStatus"},{default:o(()=>[t(Q,{modelValue:i(s).postStatus,"onUpdate:modelValue":e[11]||(e[11]=a=>i(s).postStatus=a),placeholder:"è¯·é€‰æ‹©å²—ä½çŠ¶æ€",clearable:""},{default:o(()=>[t(B,{label:"å¯ç”¨",value:"0"}),t(B,{label:"åœç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"æ’åº",prop:"sorted"},{default:o(()=>[t(fe,{modelValue:i(s).sorted,"onUpdate:modelValue":e[12]||(e[12]=a=>i(s).sorted=a),min:0,step:1,placeholder:"è¯·è¾“å…¥æ•°å­—"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"å²—ä½å¤‡æ³¨",prop:"remark"},{default:o(()=>[t(g,{modelValue:i(s).remark,"onUpdate:modelValue":e[13]||(e[13]=a=>i(s).remark=a),rows:5,type:"textarea",placeholder:"è¯·è¾“å…¥å²—ä½å¤‡æ³¨"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),k(" "+Ce(i(s)),1)]),_:1},8,["title","loading"])]),_:1,__:[20,21]})])}}});export{Ke as default};
