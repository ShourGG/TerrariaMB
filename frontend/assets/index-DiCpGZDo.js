import{af as N,d as Z,r as u,o as we,a as Ne,g as n,S as A,e as Se,i as y,f as t,w as o,Q as m,j as G,D as R,y as h,k,R as X,z as i,t as Ce,H as J,I as V,T as D,U as w,V as E,W as O,X as Ie}from"./index-_hVn5I9W.js";const xe=r=>N.get("/koi/sysPost/listPage",r),Ve=r=>N.get("/koi/sysPost/getById/"+r),De=r=>N.post("/koi/sysPost/update",r),Ue=r=>N.post("/koi/sysPost/add",r),Me=r=>N.post("/koi/sysPost/deleteById/"+r),Be=r=>N.post("/koi/sysPost/batchDelete",r),Te=(r,Y)=>N.post("/koi/sysPost/updateStatus/"+r+"/"+Y),Ae={class:"koi-flex"},Ye=Z({name:"postPage"}),Ke=Z({...Ye,setup(r){const Y=u(!1),P=u(!0),$=u([{postId:1,postCode:"CEO",postName:"董事长🌻",sorted:1,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:2,postCode:"PM",postName:"项目经理🌻",sorted:2,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:3,postCode:"HR",postName:"人力资源🌻",sorted:3,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:4,postCode:"NORMAL",postName:"普通员工🌻",sorted:4,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:5,postCode:"TECHNOLOGY",postName:"技术岗位🌻",sorted:4,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"}]),p=u({pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}),U=u(0),ee=()=>{p.value={pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}},te=()=>{console.log("搜索"),p.value.pageNo=1,c()},oe=()=>{console.log("重置搜索"),ee(),c()},c=async()=>{U.value=200},I=async()=>{try{const l=await xe(p.value);console.log("岗位数据表格数据->",l.data),$.value=l.data.records,U.value=l.data.total}catch(l){console.log(l),w("数据查询失败，请刷新重试🌻")}};we(()=>{c()});const M=u([]),L=u(!0),q=u(!0),le=l=>{M.value=l.map(e=>e.postId),L.value=l.length!=1,q.value=!l.length},ae=()=>{x(),K.value="岗位添加",s.value.postStatus="0",S.value.koiOpen(),J("添加🌻")},se=async l=>{if(console.log("回显数据ID",l),l==null||l==""){O("请选择需要修改的数据🌻");return}try{const e=await Ve(l);console.log(e.data),s.value=e.data}catch(e){w("数据获取失败，请刷新重试🌻"),console.log(e)}},H=async l=>{x(),K.value="岗位修改";const e=l?l.postId:M.value[0];(e==null||e=="")&&V("请选中需要修改的数据🌻"),console.log(e),se(e),S.value.koiOpen(),J("修改🌻")},S=u(),K=u("岗位类型管理"),z=u();let s=u({postName:null,postCode:null,postStatus:null,sorted:1,remark:null});const x=()=>{s.value={postName:null,postCode:null,postStatus:null,sorted:1,remark:null}},ne=Ne({postName:[{required:!0,message:"请输入岗位名字",trigger:"blur"}],postCode:[{required:!0,message:"请输入岗位编码",trigger:"blur"}],postStatus:[{required:!0,message:"请输入选择岗位状态",trigger:"blur"}]}),b=u(!1),re=()=>{z.value&&(b.value=!0,z.value.validate(async l=>{if(l)if(console.log("表单ID",s.value.postId),s.value.postId!=null&&s.value.postId!="")try{await De(s.value),D("修改成功🌻"),b.value=!1,S.value.koiQuickClose(),x(),c()}catch(e){console.log(e),b.value=!1,w("修改失败，请刷新重试🌻")}else try{await Ue(s.value),D("添加成功🌻"),b.value=!1,S.value.koiQuickClose(),x(),c()}catch(e){console.log(e),b.value=!1,w("添加失败，请刷新重试🌻")}else V("验证失败，请检查填写内容🌻"),b.value=!1}))},pe=()=>{S.value.koiClose()},ue=l=>{let e=l.postStatus==="0"?"启用":"停用";E("确认要["+e+"]-["+l.postName+"]吗？").then(async()=>{if(x(),!l.postId||!l.postStatus){O("请选择需要修改的数据🌻");return}try{await Te(l.postId,l.postStatus),D("修改成功🌻")}catch(g){console.log(g),I(),w("修改失败，请刷新重试🌻")}}).catch(()=>{V("已取消🌻")})},de=l=>{const e=l.postId;if(e==null||e==""){O("请选中需要删除的数据🌻");return}E("您确认需要删除岗位名称["+l.postName+"]么？").then(async()=>{try{await Me(e),I(),D("删除成功🌻")}catch(g){console.log(g),I(),w("删除失败，请刷新重试🌻")}}).catch(()=>{V("已取消🌻")})},ie=()=>{if(M.value.length==0){Ie("请选择需要删除的数据🌻");return}E("您确认需要进行批量删除么？").then(async()=>{try{await Be(M.value),I(),D("批量删除成功🌻")}catch(l){console.log(l),I(),w("批量删除失败，请刷新重试🌻")}}).catch(()=>{V("已取消🌻")})};return(l,e)=>{const g=n("el-input"),v=n("el-form-item"),B=n("el-option"),Q=n("el-select"),_=n("el-button"),j=n("el-form"),f=n("el-col"),ce=n("KoiToolbar"),W=n("el-row"),d=n("el-table-column"),me=n("el-switch"),F=n("el-tooltip"),ge=n("el-table"),ve=n("el-pagination"),fe=n("el-input-number"),_e=n("KoiDrawer"),ye=n("KoiCard"),be=A("debounce"),he=A("throttle"),C=A("auth"),ke=A("loading");return y(),Se("div",Ae,[t(ye,null,{default:o(()=>[m(t(j,{inline:!0},{default:o(()=>[t(v,{label:"岗位名称",prop:"postName"},{default:o(()=>[t(g,{placeholder:"请输入岗位名称",modelValue:p.value.postName,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value.postName=a),clearable:"",style:{width:"240px"},onKeyup:R(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"岗位编码",prop:"postCode"},{default:o(()=>[t(g,{placeholder:"请输入岗位编码",modelValue:p.value.postCode,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value.postCode=a),clearable:"",style:{width:"240px"},onKeyup:R(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"岗位状态",prop:"postStatus"},{default:o(()=>[t(Q,{placeholder:"请选择岗位状态",modelValue:p.value.postStatus,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value.postStatus=a),clearable:"",style:{width:"240px"},onKeyup:R(c,["enter","native"])},{default:o(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:o(()=>[m((y(),h(_,{type:"primary",icon:"search",plain:""},{default:o(()=>e[14]||(e[14]=[k("搜索")])),_:1,__:[14]})),[[be,te]]),m((y(),h(_,{type:"danger",icon:"refresh",plain:""},{default:o(()=>e[15]||(e[15]=[k("重置")])),_:1,__:[15]})),[[he,oe]])]),_:1})]),_:1},512),[[X,P.value]]),t(W,{gutter:10},{default:o(()=>[m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=a=>ae())},{default:o(()=>e[16]||(e[16]=[k("新增")])),_:1,__:[16]})]),_:1})),[[C,["system:role:add"]]]),m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=a=>H()),disabled:L.value},{default:o(()=>e[17]||(e[17]=[k("修改")])),_:1,__:[17]},8,["disabled"])]),_:1})),[[C,["system:role:update"]]]),m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=a=>ie()),disabled:q.value},{default:o(()=>e[18]||(e[18]=[k("删除")])),_:1,__:[18]},8,["disabled"])]),_:1})),[[C,["system:role:delete"]]]),m((y(),h(f,{span:1.5},{default:o(()=>[t(_,{type:"warning",icon:"download",plain:""},{default:o(()=>e[19]||(e[19]=[k("导出")])),_:1,__:[19]})]),_:1})),[[C,["system:role:export"]]]),t(ce,{showSearch:P.value,"onUpdate:showSearch":e[6]||(e[6]=a=>P.value=a),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[20]||(e[20]=G("br",null,null,-1)),m((y(),h(ge,{border:"",data:$.value,"empty-text":"暂时没有数据哟🌻",onSelectionChange:le},{default:o(()=>[t(d,{type:"selection",width:"55",align:"center"}),t(d,{label:"序号",prop:"postId",width:"80px",align:"center",type:"index"}),t(d,{label:"岗位名称",prop:"postName",width:"180px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"岗位编码",prop:"postCode",width:"130px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"岗位状态",prop:"postStatus",width:"100px",align:"center"},{default:o(a=>[t(me,{modelValue:a.row.postStatus,"onUpdate:modelValue":T=>a.row.postStatus=T,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:T=>ue(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(d,{label:"显示顺序",prop:"sorted",width:"100px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"岗位备注",prop:"remark",width:"220px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),t(d,{label:"创建人",prop:"createBy",width:"150px",align:"center"}),t(d,{label:"修改人",prop:"updateBy",width:"150px",align:"center"}),t(d,{label:"修改时间",prop:"updateTime",width:"180px",align:"center"}),t(d,{label:"操作",align:"center",width:"120",fixed:"right"},{default:o(({row:a})=>[t(F,{content:"修改🌻",placement:"top"},{default:o(()=>[m(t(_,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:T=>H(a)},null,8,["onClick"]),[[C,["system:role:update"]]])]),_:2},1024),t(F,{content:"删除🌻",placement:"top"},{default:o(()=>[m(t(_,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:T=>de(a)},null,8,["onClick"]),[[C,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,Y.value]]),e[21]||(e[21]=G("br",null,null,-1)),m(t(ve,{background:"","current-page":p.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=a=>p.value.pageNo=a),"page-size":p.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=a=>p.value.pageSize=a),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[X,U.value>0]]),t(_e,{ref_key:"koiDrawerRef",ref:S,title:K.value,onKoiConfirm:re,onKoiCancel:pe,loading:b.value},{content:o(()=>[t(j,{ref_key:"formRef",ref:z,rules:ne,model:i(s),"label-width":"80px","status-icon":""},{default:o(()=>[t(W,null,{default:o(()=>[t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"岗位名称",prop:"postName"},{default:o(()=>[t(g,{modelValue:i(s).postName,"onUpdate:modelValue":e[9]||(e[9]=a=>i(s).postName=a),placeholder:"请输入岗位名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"岗位编码",prop:"postCode"},{default:o(()=>[t(g,{modelValue:i(s).postCode,"onUpdate:modelValue":e[10]||(e[10]=a=>i(s).postCode=a),placeholder:"请输入岗位编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"岗位状态",prop:"postStatus"},{default:o(()=>[t(Q,{modelValue:i(s).postStatus,"onUpdate:modelValue":e[11]||(e[11]=a=>i(s).postStatus=a),placeholder:"请选择岗位状态",clearable:""},{default:o(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"排序",prop:"sorted"},{default:o(()=>[t(fe,{modelValue:i(s).sorted,"onUpdate:modelValue":e[12]||(e[12]=a=>i(s).sorted=a),min:0,step:1,placeholder:"请输入数字"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:o(()=>[t(v,{label:"岗位备注",prop:"remark"},{default:o(()=>[t(g,{modelValue:i(s).remark,"onUpdate:modelValue":e[13]||(e[13]=a=>i(s).remark=a),rows:5,type:"textarea",placeholder:"请输入岗位备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),k(" "+Ce(i(s)),1)]),_:1},8,["title","loading"])]),_:1,__:[20,21]})])}}});export{Ke as default};
